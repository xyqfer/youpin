(function(t){function e(e){for(var n,s,r=e[0],l=e[1],c=e[2],u=0,m=[];u<r.length;u++)s=r[u],i[s]&&m.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);f&&f(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={0:0},o=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/v2ex/m/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var f=l;o.push([0,1]),a()})({0:function(t,e,a){t.exports=a("Vtdi")},"1WXP":function(t,e,a){},"4irR":function(t,e,a){},"5NaC":function(t,e,a){"use strict";var n=a("rWKQ"),i=a.n(n);i.a},"8qS9":function(t,e,a){},"9lkS":function(t,e,a){"use strict";var n=a("AeAW"),i=a.n(n);i.a},AIN3:function(t,e,a){"use strict";var n=a("1WXP"),i=a.n(n);i.a},AeAW:function(t,e,a){},"EG/1":function(t,e,a){},EWTw:function(t,e,a){"use strict";var n=a("e6ga"),i=a.n(n);i.a},Gqo1:function(t,e,a){"use strict";var n=a("Iuxu"),i=a.n(n);i.a},"Hm/9":function(t,e,a){},Iuxu:function(t,e,a){},KEwJ:function(t,e,a){"use strict";var n=a("n3If"),i=a.n(n);i.a},LNOd:function(t,e,a){},N2jd:function(t,e,a){"use strict";var n=a("oLHx"),i=a.n(n);i.a},OYgv:function(t,e,a){},QELj:function(t,e,a){"use strict";var n=a("jla9"),i=a.n(n);i.a},S4AP:function(t,e,a){"use strict";var n=a("4irR"),i=a.n(n);i.a},Vtdi:function(t,e,a){"use strict";a.r(e);a("91GP"),a("yt8O"),a("VRzm");var n=a("Kw5r"),i=a("1Cyj"),o=a("7eDf"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-app",{attrs:{params:t.f7Params}},[a("f7-statusbar"),a("f7-view",{staticClass:"ios-edges",attrs:{url:"/",main:!0,"push-state":!0,"push-state-root":t.root,"stack-pages":!0}})],1)},r=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{ref:"homePage",attrs:{ptr:!0},on:{"page:init":t.onPageInit,"ptr:refresh":t.onRefresh}},[a("f7-navbar",[a("f7-nav-title",[t._v("V2EX × 🌀")]),a("f7-nav-right",[a("f7-link",{attrs:{"icon-ios":"f7:compose","icon-md":"material:create"}})],1)],1),a("f7-toolbar",{attrs:{tabbar:"",labels:""}},[a("f7-link",{attrs:{"tab-link-active":"","tab-link":"",href:"/","icon-ios":"f7:chat_fill","icon-md":"material:chat_bubble",animate:!1,text:"最新"}}),a("f7-link",{attrs:{"tab-link":"",href:"/nodes/","icon-ios":"f7:keyboard","icon-md":"material:apps",animate:!1,text:"节点"}}),a("f7-link",{attrs:{"tab-link":"",href:"/discovery/","icon-ios":"f7:compass","icon-md":"material:explore",animate:!1,text:"发现"}}),a("f7-link",{attrs:{"tab-link":"",href:"/me/","icon-ios":"f7:person","icon-md":"material:person",animate:!1,text:"我"}})],1),a("f7-fab",{attrs:{slot:"fixed",position:"right-bottom"},slot:"fixed"},[a("f7-icon",{attrs:{ios:"f7:layers_fill",md:"material:layers"}}),a("f7-icon",{attrs:{ios:"f7:close",md:"material:close"}}),a("f7-fab-buttons",{attrs:{position:"top"}},[a("f7-fab-button",{on:{click:function(e){t.onFabClick("hot")}}},[t._v("最热")]),a("f7-fab-button",{on:{click:function(e){t.onFabClick("play")}}},[t._v("好玩")]),a("f7-fab-button",{on:{click:function(e){t.onFabClick("creative")}}},[t._v("创意")]),a("f7-fab-button",{on:{click:function(e){t.onFabClick("tech")}}},[t._v("技术")])],1)],1),a("f7-list",{staticClass:"topic-list",attrs:{"media-list":""}},t._l(t.listData,function(e){return a("f7-list-item",{key:e.id,attrs:{link:"/t/"+e.id}},[a("img",{attrs:{slot:"media",src:e.avatar},slot:"media"}),a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(e.title)+"\n      ")]),a("div",{attrs:{slot:"text"},slot:"text"},[t._v("\n        "+t._s(e.node)+"\n        "),e.time?[t._v("\n          • "+t._s(e.time)+"\n        ")]:t._e()],2),a("span",{attrs:{slot:"after"},slot:"after"},[a("f7-chip",{staticClass:"chip-container",attrs:{text:e.reply+""}})],1)])}))],1)},c=[],f="".concat("https://sy2bnjwp1a.leanapp.cn","/api/v1/v2ex"),u={path:f,hot:"".concat(f,"/hot"),tab:"".concat(f,"/tab"),new:"".concat(f,"/new"),allNodes:"".concat(f,"/all-nodes"),node:"".concat(f,"/node"),nodes:"".concat(f,"/nodes"),member:"".concat(f,"/member"),t:"".concat(f,"/t")},m={components:{f7Page:o["t"],f7Navbar:o["s"],f7NavTitle:o["r"],f7NavRight:o["q"],f7List:o["k"],f7ListItem:o["l"],f7Link:o["j"],f7Icon:o["i"],f7Chip:o["e"],f7Fab:o["f"],f7FabButtons:o["h"],f7FabButton:o["g"],f7Toolbar:o["z"]},data:function(){return{listData:[],lfKey:"homeData"}},created:function(){var t=this;this.$lf.getItem(this.lfKey).then(function(e){e&&(t.listData=e)}).catch(function(t){console.log(t)})},methods:{onPageInit:function(){var t=this;this.$nextTick(function(){t.$f7.ptr.get(t.$refs.homePage.$el.querySelector(".ptr-content")).refresh()})},onRefresh:function(t,e){this.getData().then(function(){e()})},onFabClick:function(t){var e={tech:"技术",creative:"创意",play:"好玩",hot:"最热"};this.$f7router.navigate("/tab/".concat(t,"?title=").concat(e[t]))},getData:function(){var t=this;return this.$http.get(u.new).then(function(e){e.success&&(t.listData=e.data,t.$lf.setItem(t.lfKey,e.data).catch(function(t){console.log(t)}))}).catch(function(t){console.log(t)})}}},h=m,p=(a("QELj"),a("KHd+")),d=Object(p["a"])(h,l,c,!1,null,null,null),g=d.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",[a("f7-navbar",[a("f7-nav-title",[t._v("发现")])],1),a("f7-toolbar",{attrs:{tabbar:"",labels:""}},[a("f7-link",{attrs:{"tab-link":"",href:"/","icon-ios":"f7:chat","icon-md":"material:chat_bubble",animate:!1,text:"最新"}}),a("f7-link",{attrs:{"tab-link":"",href:"/nodes/","icon-ios":"f7:keyboard","icon-md":"material:apps",animate:!1,text:"节点"}}),a("f7-link",{attrs:{href:"/discovery/","tab-link":"","tab-link-active":"","icon-ios":"f7:compass_fill","icon-md":"material:explore",animate:!1,text:"发现"}}),a("f7-link",{attrs:{"tab-link":"",href:"/me/","icon-ios":"f7:person","icon-md":"material:person",animate:!1,text:"我"}})],1),a("f7-list",[a("f7-list-item",{attrs:{link:"#",title:"热门"}},[a("div",{attrs:{slot:"media"},slot:"media"},[a("f7-icon",{attrs:{ios:"f7:graph_round_fill",md:"material:camera"}})],1)])],1),a("f7-list",[a("f7-list-item",{attrs:{link:"#",title:"小工具"}},[a("div",{attrs:{slot:"media"},slot:"media"},[a("f7-icon",{attrs:{ios:"f7:stopwatch_fill",md:"material:build"}})],1)])],1)],1)},b=[],k={components:{f7Page:o["t"],f7Navbar:o["s"],f7NavTitle:o["r"],f7Link:o["j"],f7BlockTitle:o["d"],f7Toolbar:o["z"],f7List:o["k"],f7ListItem:o["l"],f7Icon:o["i"]},data:function(){return{}},methods:{}},_=k,y=(a("vzkK"),Object(p["a"])(_,v,b,!1,null,"3e29882c",null)),x=y.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",[a("f7-navbar",[a("f7-nav-title",[t._v("我")])],1),a("f7-toolbar",{attrs:{tabbar:"",labels:""}},[a("f7-link",{attrs:{"tab-link":"",href:"/","icon-ios":"f7:chat","icon-md":"material:chat_bubble",animate:!1,text:"最新"}}),a("f7-link",{attrs:{"tab-link":"",href:"/nodes/","icon-ios":"f7:keyboard","icon-md":"material:apps",animate:!1,text:"节点"}}),a("f7-link",{attrs:{href:"/discovery/","tab-link":"","icon-ios":"f7:compass","icon-md":"material:explore",animate:!1,text:"发现"}}),a("f7-link",{attrs:{"tab-link":"",href:"/me/","tab-link-active":"","icon-ios":"f7:person_fill","icon-md":"material:person",animate:!1,text:"我"}})],1)],1)},D=[],I={components:{f7Page:o["t"],f7Navbar:o["s"],f7NavTitle:o["r"],f7Link:o["j"],f7BlockTitle:o["d"],f7Chip:o["e"],f7Block:o["c"],f7NavRight:o["q"],f7Toolbar:o["z"]},data:function(){return{}},methods:{}},P=I,$=(a("rces"),Object(p["a"])(P,w,D,!1,null,"9b7f2e66",null)),C=$.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{attrs:{"infinite-preloader":t.showPreloader,infinite:!0},on:{"page:init":t.onPageInit,infinite:t.onInfinite}},[a("f7-navbar",{attrs:{title:"群聊","back-link":"返回",subtitle:t.count}},[a("f7-nav-right",[a("f7-link",{attrs:{"icon-ios":"f7:more_fill","icon-md":"material:menu"},on:{click:t.onNavRightClick}})],1)],1),t.isInit?t._e():a("f7-block",{staticClass:"text-align-center"},[a("f7-preloader")],1),a("f7-messages",{ref:"messages",staticClass:"v2ex-message-list",attrs:{"scroll-messages":!1}},t._l(t.messagesData,function(e,n){return a("f7-message",{key:n,attrs:{type:e.type,image:e.image,name:e.name,avatar:e.avatar,first:t.isFirstMessage(e,n),last:t.isLastMessage(e,n),tail:t.isTailMessage(e,n)},on:{"click:avatar":function(a){t.onClickMember(e.name)},click:function(a){e.meta.floor&&t.onMessageClick(n,a)}}},[e.text?a("div",{attrs:{slot:"text"},domProps:{innerHTML:t._s(e.text)},slot:"text"}):t._e(),a("div",{attrs:{slot:"text-header"},slot:"text-header"},[e.meta.floor?[t._v("\n          "+t._s(e.meta.floor)+"楼\n        ")]:t._e(),e.meta.addition?[t._v("\n          "+t._s(e.meta.addition.title)+"\n        ")]:t._e()],2),a("div",{attrs:{slot:"text-footer"},slot:"text-footer"},[e.meta.time?[t._v("\n          "+t._s(e.meta.time)+"\n        ")]:t._e(),e.meta.status?[t._v("\n          "+t._s(e.meta.status)+"\n        ")]:t._e(),e.meta.addition?[t._v("\n          "+t._s(e.meta.addition.time)+"\n        ")]:t._e(),e.meta.thank?[t._v("\n          • "+t._s(e.meta.thank)+"\n        ")]:t._e(),e.meta.click?[t._v("\n          • "+t._s(e.meta.click)+"\n        ")]:t._e()],2)])})),a("f7-photo-browser",{key:t.photoBrowserKey,ref:"photoBrowser",attrs:{photos:t.photos,theme:"dark",type:"popup","back-link-text":"关闭","navbar-of-text":"/",toolbar:!1}}),a("f7-popover",{ref:"popover"},[a("f7-list",[a("f7-list-item",{attrs:{link:"","popover-close":"",title:"查看对话"},on:{click:t.onShowChatClick}})],1)],1)],1)},j=[],M=(a("rGqo"),a("iv4g")),L=a("yT7P"),N={components:{f7Navbar:o["s"],f7NavRight:o["q"],f7Page:o["t"],f7Messages:o["o"],f7MessagesTitle:o["p"],f7Message:o["m"],f7Messagebar:o["n"],f7Link:o["j"],f7Preloader:o["x"],f7Block:o["c"],f7Icon:o["i"],f7PhotoBrowser:o["v"],f7Popover:o["w"],f7List:o["k"],f7ListItem:o["l"]},created:function(){var t=this.$f7route.params.id,e="/t/".concat(t,"/topic");this.id=t,this.lfKey=e},mounted:function(){var t=this;this.$f7ready(function(){t.messages=t.$refs.messages.f7Messages})},data:function(){return{messagesData:[],id:0,lfKey:"",p:1,total:1,isInit:!1,photos:[],node:{},dialogData:[],photoBrowserKey:0,allowInfinite:!0,showPreloader:!0,count:""}},methods:{onPageInit:function(){var t=this;this.getData().then(function(){t.isInit=!0})},onInfinite:function(){var t=this;this.allowInfinite&&(this.allowInfinite=!1,this.getData().then(function(){t.showPreloader=t.allowInfinite=!(t.p>t.total)}))},onNavRightClick:function(){this.node.url&&this.$f7router.navigate("/chatDetail/".concat(this.id))},showPopover:function(t,e){var a=this,n=Object(L["a"])({},this.messagesData[t]),i=Object(M["a"])(n.meta.at);if(i.length>0){var o=this.messagesData.slice(0,t).reverse().filter(function(t){var e=i.indexOf(t.name);return-1!==e&&(i.splice(e,1),!0)});o.length>0&&(n.type="sent",this.dialogData=o.concat(n),this.$nextTick(function(){a.$refs.popover.open(e.target)}))}},onShowChatClick:function(){this.$f7router.navigate("/dialog/".concat(encodeURIComponent(JSON.stringify(this.dialogData))))},getData:function(){var t=this,e=this.id;return this.$http.get("".concat(u.t,"/").concat(e,"?p=").concat(this.p)).then(function(e){if(e.success){var a=[],n=e.data.topic;t.count=n.count,t.$lf.setItem(t.lfKey,n).catch(function(t){console.log(t)}),1===t.p&&(a.push({type:"received",name:n.author,text:n.title,avatar:n.avatar,meta:{time:n.time,click:n.click}}),""!==n.content&&a.push({type:"received",name:n.author,text:n.content,avatar:n.avatar,meta:{status:n.status}}),n.additions&&n.additions.forEach(function(t){a.push({type:"received",name:n.author,text:t.content,avatar:n.avatar,meta:{addition:{time:t.time,title:t.title}}})}),t.node=n.node),e.data.reply.forEach(function(t){a.push({name:t.author,type:"received",text:t.content,avatar:t.avatar,meta:{floor:t.floor,time:t.time,thank:t.thank,at:t.at}})}),t.p>=e.data.total&&(t.showPreloader=!1,t.allowInfinite=!1),t.messagesData=t.messagesData.concat(a),t.p=t.p+1,t.total=e.data.total}})},onMessageClick:function(t,e){var a=this,n=e.target.nodeName.toLowerCase();if("img"===n){var i=e.target.getAttribute("src");i&&(this.photos=[i],this.photoBrowserKey=+new Date,this.$nextTick(function(){a.$refs.photoBrowser.open(0)}))}else"a"!==n&&this.showPopover(t,e)},onClickMember:function(t){this.$f7router.navigate("/member/".concat(t,"/"))},isFirstMessage:function(t,e){var a=this,n=a.messagesData[e-1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)},isLastMessage:function(t,e){var a=this,n=a.messagesData[e+1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)},isTailMessage:function(t,e){var a=this,n=a.messagesData[e+1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)}}},O=N,B=(a("9lkS"),Object(p["a"])(O,T,j,!1,null,null,null)),E=B.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{ref:"nodesPage",attrs:{ptr:!0},on:{"page:init":t.onPageInit,"ptr:refresh":t.onRefresh}},[a("f7-navbar",[a("f7-nav-title",[t._v("节点")]),a("f7-nav-right",[a("f7-link",{attrs:{href:"/all-nodes/","icon-ios":"f7:world","icon-md":"material:language"}})],1)],1),a("f7-toolbar",{attrs:{tabbar:"",labels:""}},[a("f7-link",{attrs:{"tab-link":"",href:"/","icon-ios":"f7:chat","icon-md":"material:chat_bubble",animate:!1,text:"最新"}}),a("f7-link",{attrs:{"tab-link-active":"","tab-link":"",href:"/nodes/","icon-ios":"f7:keyboard_fill","icon-md":"material:apps",animate:!1,text:"节点"}}),a("f7-link",{attrs:{href:"/discovery/","tab-link":"","icon-ios":"f7:compass","icon-md":"material:explore",animate:!1,text:"发现"}}),a("f7-link",{attrs:{"tab-link":"",href:"/me/","icon-ios":"f7:person","icon-md":"material:person",animate:!1,text:"我"}})],1),t._l(t.nodesData,function(e){return[a("f7-block-title",{staticClass:"group-title"},[t._v("\n      "+t._s(e.groupName)+"\n    ")]),a("f7-block",{staticClass:"node-container",attrs:{strong:""}},t._l(e.nodes,function(e){return a("f7-chip",{staticClass:"node-chip",attrs:{outline:"",text:e.name},on:{click:function(a){t.onChipClick(e.url,e.name)}}})}))]})],2)},A=[],S={components:{f7Page:o["t"],f7Navbar:o["s"],f7NavTitle:o["r"],f7Link:o["j"],f7BlockTitle:o["d"],f7Chip:o["e"],f7Block:o["c"],f7NavRight:o["q"],f7Toolbar:o["z"]},data:function(){return{nodesData:[],lfKey:"nodesData"}},created:function(){var t=this;this.$lf.getItem(this.lfKey).then(function(e){e&&(t.nodesData=e)}).catch(function(t){console.log(t)})},methods:{onPageInit:function(){var t=this;this.$nextTick(function(){t.$f7.ptr.get(t.$refs.nodesPage.$el.querySelector(".ptr-content")).refresh()})},onRefresh:function(t,e){this.getData().then(function(){e()})},onChipClick:function(t,e){this.$f7router.navigate("".concat(t,"/?title=").concat(e))},getData:function(){var t=this;return this.$http.get(u.nodes).then(function(e){e.success&&(t.nodesData=e.data,t.$lf.setItem(t.lfKey,e.data).catch(function(t){console.log(t)}))}).catch(function(t){console.log(t)})}}},q=S,F=(a("AIN3"),Object(p["a"])(q,K,A,!1,null,"728dcfd3",null)),R=F.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{attrs:{"infinite-preloader":t.showPreloader,infinite:!0},on:{"page:init":t.onPageInit,infinite:t.onInfinite}},[a("f7-navbar",{attrs:{"back-link":"返回",title:t.title}}),a("f7-list",{staticClass:"topic-list",attrs:{"media-list":""}},t._l(t.listData,function(e){return a("f7-list-item",{key:e.id,attrs:{link:"/t/"+e.id}},[a("img",{attrs:{slot:"media",src:e.avatar},slot:"media"}),a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(e.title)+"\n      ")]),a("div",{attrs:{slot:"text"},slot:"text"},[e.time?[t._v("\n          "+t._s(e.time)+"\n        ")]:t._e()],2),a("span",{attrs:{slot:"after"},slot:"after"},[a("f7-chip",{staticClass:"chip-container",attrs:{text:e.reply+""}})],1)])}))],1)},W=[],z={created:function(){this.name=this.$f7route.params.name,this.title=this.$f7route.query.title},components:{f7Page:o["t"],f7Navbar:o["s"],f7List:o["k"],f7ListItem:o["l"],f7Link:o["j"],f7Icon:o["i"],f7Chip:o["e"],f7Block:o["c"]},data:function(){return{listData:[],name:"",title:"",p:1,total:1,allowInfinite:!0,showPreloader:!0}},methods:{onPageInit:function(){this.getData()},onInfinite:function(){var t=this;this.allowInfinite&&(this.allowInfinite=!1,this.getData().then(function(){t.showPreloader=t.allowInfinite=!(t.p>t.total)}))},getData:function(){var t=this,e=this.name;return this.$http.get("".concat(u.node,"/").concat(e,"?p=").concat(this.p)).then(function(e){e.success&&(t.p>=e.data.total&&(t.showPreloader=!1,t.allowInfinite=!1),t.listData=t.listData.concat(e.data.list),t.p=t.p+1,t.total=e.data.total)}).catch(function(t){console.log(t)})}}},G=z,J=(a("KEwJ"),Object(p["a"])(G,H,W,!1,null,null,null)),V=J.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{on:{"page:init":t.onPageInit}},[a("f7-navbar",{attrs:{"back-link":"返回",title:t.title}}),a("f7-list",{staticClass:"topic-list",attrs:{"media-list":""}},t._l(t.listData,function(e){return a("f7-list-item",{key:e.id,attrs:{link:"/t/"+e.id}},[a("img",{attrs:{slot:"media",src:e.avatar},slot:"media"}),a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(e.title)+"\n      ")]),a("div",{attrs:{slot:"text"},slot:"text"},[e.time?[t._v("\n          "+t._s(e.time)+"\n        ")]:t._e()],2),a("span",{attrs:{slot:"after"},slot:"after"},[a("f7-chip",{staticClass:"chip-container",attrs:{text:e.reply+""}})],1)])}))],1)},Y=[],Q={created:function(){this.name=this.$f7route.params.name,this.title=this.$f7route.query.title},components:{f7Page:o["t"],f7Navbar:o["s"],f7List:o["k"],f7ListItem:o["l"],f7Link:o["j"],f7Icon:o["i"],f7Chip:o["e"],f7Block:o["c"]},data:function(){return{listData:[],name:"",title:""}},methods:{onPageInit:function(){this.getData()},getData:function(){var t=this,e=this.name;return this.$http.get("".concat(u.tab,"/").concat(e,"?p=").concat(this.p)).then(function(e){e.success&&(t.listData=e.data)}).catch(function(t){console.log(t)})}}},U=Q,Z=(a("bA33"),Object(p["a"])(U,X,Y,!1,null,null,null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{on:{"page:init":t.onPageInit}},[a("f7-navbar",{attrs:{title:"所有节点","back-link":"返回"}}),t._l(t.nodesData,function(e){return[a("f7-block-title",{staticClass:"group-title"},[t._v("\n      "+t._s(e.groupName)+"\n    ")]),a("f7-block",{staticClass:"node-container",attrs:{strong:""}},t._l(e.nodes,function(e){return a("f7-chip",{staticClass:"node-chip",attrs:{outline:"",text:e.name},on:{click:function(a){t.onChipClick(e.url,e.name)}}})}))]})],2)},at=[],nt={components:{f7Page:o["t"],f7Navbar:o["s"],f7NavTitle:o["r"],f7Link:o["j"],f7BlockTitle:o["d"],f7Chip:o["e"],f7Block:o["c"]},data:function(){return{nodesData:[]}},methods:{onPageInit:function(){this.getData()},onChipClick:function(t,e){this.$f7router.navigate("".concat(t,"/?title=").concat(e))},getData:function(){var t=this;return this.$http.get(u.allNodes).then(function(e){e.success&&(t.nodesData=e.data)}).catch(function(t){console.log(t)})}}},it=nt,ot=(a("Gqo1"),Object(p["a"])(it,et,at,!1,null,"6dd508e2",null)),st=ot.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{on:{"page:init":t.onPageInit}},[a("f7-navbar",{attrs:{title:"详细资料","back-link":"返回"}}),t.memberData.name?a("f7-list",{staticClass:"member-list",attrs:{"media-list":""}},[a("f7-list-item",[a("img",{attrs:{slot:"media",src:t.memberData.avatar},slot:"media"}),a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(t.memberData.name)+"\n      ")]),a("div",{attrs:{slot:"text"},slot:"text"},[t._v("\n        "+t._s(t.memberData.info)+"\n      ")])])],1):t._e(),t.memberData.rank?a("f7-list",[a("f7-list-item",{attrs:{link:"",title:"今日活跃度排名",after:t.memberData.rank}})],1):t._e(),t.memberData.reply&&t.memberData.topic?a("f7-list",{staticClass:"creation-list"},[a("f7-list-item",{attrs:{link:t.memberData.topic.has,title:"创建的主题",after:t.memberData.topic.reason}}),a("f7-list-item",{attrs:{link:t.memberData.reply.has,title:"创建的回复",after:t.memberData.reply.reason}})],1):t._e()],1)},lt=[],ct={components:{f7Page:o["t"],f7Navbar:o["s"],f7NavTitle:o["r"],f7Link:o["j"],f7BlockTitle:o["d"],f7List:o["k"],f7ListItem:o["l"]},created:function(){this.name=this.$f7route.params.name},data:function(){return{memberData:{},name:""}},methods:{onPageInit:function(){this.getData()},getData:function(){var t=this;return this.$http.get("".concat(u.member,"/").concat(this.name)).then(function(e){e.success&&(t.memberData=e.data)}).catch(function(t){console.log(t)})}}},ft=ct,ut=(a("EWTw"),Object(p["a"])(ft,rt,lt,!1,null,null,null)),mt=ut.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{attrs:{"infinite-preloader":t.showPreloader,infinite:!0},on:{"page:init":t.onPageInit,infinite:t.onInfinite}},[a("f7-navbar",{attrs:{"back-link":"返回",title:"创建的主题"}}),a("f7-list",{staticClass:"topic-list",attrs:{"media-list":""}},t._l(t.listData,function(e){return a("f7-list-item",{key:e.id,attrs:{link:"/t/"+e.id}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(e.title)+"\n      ")]),a("div",{attrs:{slot:"text"},slot:"text"},[e.time?[t._v("\n          "+t._s(e.time)+"\n        ")]:t._e()],2),a("span",{attrs:{slot:"after"},slot:"after"},[a("f7-chip",{staticClass:"chip-container",attrs:{text:e.reply+""}})],1)])}))],1)},pt=[],dt={created:function(){this.name=this.$f7route.params.name},components:{f7Page:o["t"],f7Navbar:o["s"],f7List:o["k"],f7ListItem:o["l"],f7Link:o["j"],f7Icon:o["i"],f7Chip:o["e"],f7Block:o["c"]},data:function(){return{listData:[],p:1,total:1,allowInfinite:!0,showPreloader:!0}},methods:{onPageInit:function(){this.getData()},onInfinite:function(){var t=this;this.allowInfinite&&(this.allowInfinite=!1,this.getData().then(function(){t.showPreloader=t.allowInfinite=!(t.p>t.total)}))},getData:function(){var t=this;return this.$http.get("".concat(u.member,"/").concat(this.name,"/topic?p=").concat(this.p)).then(function(e){e.success&&(t.p>=e.data.total&&(t.showPreloader=!1,t.allowInfinite=!1),t.listData=t.listData.concat(e.data.topic),t.p=t.p+1,t.total=e.data.total)}).catch(function(t){console.log(t)})}}},gt=dt,vt=(a("N2jd"),Object(p["a"])(gt,ht,pt,!1,null,null,null)),bt=vt.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{attrs:{"infinite-preloader":t.showPreloader,infinite:!0},on:{"page:init":t.onPageInit,infinite:t.onInfinite}},[a("f7-navbar",{attrs:{title:"创建的回复","back-link":"返回"}}),t.isInit?t._e():a("f7-block",{staticClass:"text-align-center"},[a("f7-preloader")],1),a("f7-messages",{ref:"messages",staticClass:"v2ex-message-list",attrs:{"scroll-messages":!1}},t._l(t.messagesData,function(e,n){return a("f7-message",{key:n,attrs:{type:e.type,name:e.name,first:t.isFirstMessage(e,n),last:t.isLastMessage(e,n),tail:t.isTailMessage(e,n)},on:{click:t.onMessageClick}},[e.text?a("div",{attrs:{slot:"text"},domProps:{innerHTML:t._s(e.text)},slot:"text"}):t._e(),a("div",{attrs:{slot:"text-footer"},slot:"text-footer"},[e.meta.time?[t._v("\n          "+t._s(e.meta.time)+"\n        ")]:t._e(),e.meta.node?[t._v("\n          "+t._s(e.meta.node)+"\n        ")]:t._e()],2)])})),a("f7-photo-browser",{key:t.photoBrowserKey,ref:"photoBrowser",attrs:{photos:t.photos,theme:"dark",type:"popup","back-link-text":"关闭","navbar-of-text":"/",toolbar:!1}})],1)},_t=[],yt={components:{f7Navbar:o["s"],f7Page:o["t"],f7Messages:o["o"],f7MessagesTitle:o["p"],f7Message:o["m"],f7Messagebar:o["n"],f7Link:o["j"],f7Preloader:o["x"],f7Block:o["c"],f7Icon:o["i"],f7PhotoBrowser:o["v"]},created:function(){this.name=this.$f7route.params.name},mounted:function(){var t=this;this.$f7ready(function(){t.messages=t.$refs.messages.f7Messages})},data:function(){return{messagesData:[],id:0,p:1,total:1,isInit:!1,photos:[],photoBrowserKey:0,allowInfinite:!0,showPreloader:!0}},methods:{onPageInit:function(){var t=this;this.getData().then(function(){t.isInit=!0})},onInfinite:function(){var t=this;this.allowInfinite&&(this.allowInfinite=!1,this.getData().then(function(){t.showPreloader=t.allowInfinite=!(t.p>t.total)}))},getData:function(){var t=this;return this.$http.get("".concat(u.member,"/").concat(this.name,"/reply?p=").concat(this.p)).then(function(e){if(e.success){var a=[],n=t.name;e.data.reply.forEach(function(t){var e=t.received,i=t.sent;a.push({name:e.author,type:"received",text:e.content,meta:{node:e.node.name}}),a.push({name:n,type:"sent",text:i.content,meta:{time:i.time}})}),t.p>=e.data.total&&(t.showPreloader=!1,t.allowInfinite=!1),t.messagesData=t.messagesData.concat(a),t.p=t.p+1,t.total=e.data.total}})},onMessageClick:function(t){var e=this;if("img"===t.target.nodeName.toLowerCase()){var a=t.target.getAttribute("src");a&&(this.photos=[a],this.photoBrowserKey=+new Date,this.$nextTick(function(){e.$refs.photoBrowser.open(0)}))}},isFirstMessage:function(t,e){var a=this,n=a.messagesData[e-1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)},isLastMessage:function(t,e){var a=this,n=a.messagesData[e+1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)},isTailMessage:function(t,e){var a=this,n=a.messagesData[e+1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)}}},xt=yt,wt=(a("5NaC"),Object(p["a"])(xt,kt,_t,!1,null,null,null)),Dt=wt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",[a("f7-navbar",{attrs:{title:"聊天信息","back-link":"返回"}}),t.chatInfo.node.url?a("f7-list",[a("f7-list-item",{attrs:{link:t.chatInfo.node.url+"?title="+t.chatInfo.node.name,title:"所在节点",after:t.chatInfo.node.name}}),a("f7-list-item",{attrs:{link:"https://www.v2ex.com/t/"+t.id,title:"查看原帖",target:"_blank",after:"/t/"+t.id,external:!0}})],1):t._e()],1)},Pt=[],$t={components:{f7Page:o["t"],f7Navbar:o["s"],f7NavTitle:o["r"],f7Link:o["j"],f7List:o["k"],f7ListItem:o["l"]},created:function(){var t=this,e=this.$f7route.params.id;this.id=e,this.$lf.getItem("/t/".concat(e,"/topic")).then(function(e){t.chatInfo.node=e.node}).catch(function(t){console.log(t)})},data:function(){return{id:0,chatInfo:{node:{}}}}},Ct=$t,Tt=(a("S4AP"),Object(p["a"])(Ct,It,Pt,!1,null,null,null)),jt=Tt.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{on:{"page:init":t.onPageInit}},[a("f7-navbar",{attrs:{title:"对话详情","back-link":"返回"}}),a("f7-messages",{ref:"dialog",staticClass:"v2ex-message-list",attrs:{"scroll-messages":!1}},t._l(t.messagesData,function(e,n){return a("f7-message",{key:n,attrs:{type:e.type,image:e.image,name:e.name,avatar:e.avatar,first:t.isFirstMessage(e,n),last:t.isLastMessage(e,n),tail:t.isTailMessage(e,n)},on:{"click:avatar":function(a){t.onClickMember(e.name)},click:t.onMessageClick}},[e.text?a("div",{attrs:{slot:"text"},domProps:{innerHTML:t._s(e.text)},slot:"text"}):t._e(),e.meta.floor?a("div",{attrs:{slot:"text-header"},slot:"text-header"},[t._v("\n        "+t._s(e.meta.floor)+"楼\n      ")]):t._e(),e.meta.addition?a("div",{attrs:{slot:"text-header"},slot:"text-header"},[t._v("\n        "+t._s(e.meta.addition.title)+"\n      ")]):t._e(),a("div",{attrs:{slot:"text-footer"},slot:"text-footer"},[e.meta.time?[t._v("\n          "+t._s(e.meta.time)+"\n        ")]:t._e(),e.meta.status?[t._v("\n          "+t._s(e.meta.status)+"\n        ")]:t._e(),e.meta.addition?[t._v("\n          "+t._s(e.meta.addition.time)+"\n        ")]:t._e(),e.meta.thank?[t._v("\n          • "),a("span",[t._v(t._s(e.meta.thank))])]:t._e()],2)])})),a("f7-photo-browser",{key:t.photoBrowserKey,ref:"photoBrowser",attrs:{photos:t.photos,theme:"dark",type:"popup","back-link-text":"关闭","navbar-of-text":"/",toolbar:!1}})],1)},Lt=[],Nt={components:{f7Navbar:o["s"],f7Page:o["t"],f7Messages:o["o"],f7MessagesTitle:o["p"],f7Message:o["m"],f7Messagebar:o["n"],f7Link:o["j"],f7PhotoBrowser:o["v"]},mounted:function(){var t=this;this.$f7ready(function(){t.messages=t.$refs.dialog.f7Messages})},data:function(){return{messagesData:[],photos:[],photoBrowserKey:0}},methods:{onPageInit:function(){this.messagesData=JSON.parse(decodeURIComponent(this.$f7route.params.chatData))},onClickMember:function(t){this.$f7router.navigate("/member/".concat(t,"/"))},onMessageClick:function(t){var e=this;if("img"===t.target.nodeName.toLowerCase()){var a=t.target.getAttribute("src");a&&(this.photos=[a],this.photoBrowserKey=+new Date,this.$nextTick(function(){e.$refs.photoBrowser.open(0)}))}},isFirstMessage:function(t,e){var a=this,n=a.messagesData[e-1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)},isLastMessage:function(t,e){var a=this,n=a.messagesData[e+1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)},isTailMessage:function(t,e){var a=this,n=a.messagesData[e+1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)}}},Ot=Nt,Bt=(a("YMuy"),Object(p["a"])(Ot,Mt,Lt,!1,null,null,null)),Et=Bt.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",[a("f7-navbar",{attrs:{title:"Not found",backLink:"Back"}}),a("f7-block",{attrs:{strong:""}},[a("p",[t._v("Sorry")]),a("p",[t._v("Requested content not found.")])])],1)},At=[],St={components:{f7Page:o["t"],f7Navbar:o["s"],f7Block:o["c"]}},qt=St,Ft=Object(p["a"])(qt,Kt,At,!1,null,null,null),Rt=Ft.exports,Ht=[{path:"/",component:g},{path:"/nodes/",component:R},{path:"/all-nodes/",component:st},{path:"/discovery/",component:x},{path:"/me/",component:C},{path:"/t/:id",component:E},{path:"/chatDetail/:id",component:jt},{path:"/dialog/:chatData",component:Et},{path:"/go/:name",component:V},{path:"/tab/:name",component:tt},{path:"/member/:name",component:mt},{path:"/member/:name/topics",component:bt},{path:"/member/:name/replies",component:Dt},{path:"(.*)",component:Rt}],Wt={components:{f7App:o["b"],f7Panel:o["u"],f7View:o["A"],f7Statusbar:o["y"]},created:function(){this.root="/v2ex/m/"},data:function(){var t="auto";return{f7Params:{theme:t,routes:Ht,id:"m.v2ex"},root:"/"}}},zt=Wt,Gt=(a("XAuw"),Object(p["a"])(zt,s,r,!1,null,null,null)),Jt=Gt.exports,Vt=a("oAJy"),Xt=a.n(Vt),Yt=a("lIOY");Object(Yt["a"])("".concat("/v2ex/m/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),i["a"].use(o["a"]),Xt.a.config({name:"m.v2ex"}),n["a"].config.productionTip=!1,n["a"].prototype.$http={get:function(t){return"string"===typeof t&&(t={url:t}),new Promise(function(e,a){i["a"].request(Object.assign({},{method:"GET",dataType:"json",cache:!1,success:function(t){e(t)},error:function(t,e){console.log(e),a(t,e)}},t))})},post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(e,a){i["a"].request(Object.assign({},{method:"POST",dataType:"json",cache:!1,success:function(t){e(t)},error:function(t,e){console.log(e),a(t,e)}},t))})}},n["a"].prototype.$lf=Xt.a,new n["a"]({render:function(t){return t(Jt)}}).$mount("#app")},XAuw:function(t,e,a){"use strict";var n=a("EG/1"),i=a.n(n);i.a},YMuy:function(t,e,a){"use strict";var n=a("OYgv"),i=a.n(n);i.a},bA33:function(t,e,a){"use strict";var n=a("Hm/9"),i=a.n(n);i.a},e6ga:function(t,e,a){},jla9:function(t,e,a){},n3If:function(t,e,a){},oLHx:function(t,e,a){},rWKQ:function(t,e,a){},rces:function(t,e,a){"use strict";var n=a("LNOd"),i=a.n(n);i.a},vzkK:function(t,e,a){"use strict";var n=a("8qS9"),i=a.n(n);i.a}});
//# sourceMappingURL=app.572d3e79.js.map