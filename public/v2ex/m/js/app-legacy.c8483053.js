(function(t){function e(e){for(var n,o,r=e[0],l=e[1],c=e[2],f=0,u=[];f<r.length;f++)o=r[f],i[o]&&u.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);h&&h(e);while(u.length)u.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var r=a[o];0!==i[r]&&(n=!1)}n&&(s.splice(e--,1),t=l(l.s=a[0]))}return t}var n={},o={0:0},i={0:0},s=[];function r(t){return l.p+"js/"+({}[t]||t)+"-legacy."+{1:"120433a8"}[t]+".js"}function l(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(t){var e=[],a={1:1};o[t]?e.push(o[t]):0!==o[t]&&a[t]&&e.push(o[t]=new Promise(function(e,a){for(var n="css/"+({}[t]||t)+"."+{1:"defd6dce"}[t]+".css",o=l.p+n,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var r=i[s],c=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(c===n||c===o))return e()}var f=document.getElementsByTagName("style");for(s=0;s<f.length;s++){r=f[s],c=r.getAttribute("data-href");if(c===n||c===o)return e()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=e,u.onerror=function(e){var n=e&&e.target&&e.target.src||o,i=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");i.request=n,a(i)},u.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(u)}).then(function(){o[t]=0}));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise(function(e,a){n=i[t]=[e,a]});e.push(n[2]=s);var c,f=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=r(t),c=function(e){u.onerror=u.onload=null,clearTimeout(h);var a=i[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+n+": "+o+")");s.type=n,s.request=o,a[1](s)}i[t]=void 0}};var h=setTimeout(function(){c({type:"timeout",target:u})},12e4);u.onerror=u.onload=c,f.appendChild(u)}return Promise.all(e)},l.m=t,l.c=n,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(a,n,function(e){return t[e]}.bind(null,n));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/v2ex/m/",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],f=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var h=f;s.push([0,2]),a()})({0:function(t,e,a){t.exports=a("Vtdi")},"1yJj":function(t,e,a){"use strict";a("yt8O"),a("VRzm");var n="##host##/api/v1/v2ex",o={path:n,hot:"".concat(n,"/hot"),tab:"".concat(n,"/tab"),new:"".concat(n,"/new"),allNodes:"".concat(n,"/all-nodes"),node:"".concat(n,"/node"),nodes:"".concat(n,"/nodes"),member:"".concat(n,"/member"),t:"".concat(n,"/t"),search:"https://ibdkopi6vn.avosapps.us/api/v1/v2ex/search?",initLogin:"".concat(n,"/login/init"),login:"".concat(n,"/login"),logout:"".concat(n,"/logout"),recent:"".concat(n,"/recent"),checkLogin:"".concat(n,"/checkLogin"),tag:"".concat(n,"/tag")};e["a"]=o},"4irR":function(t,e,a){},"5NaC":function(t,e,a){"use strict";var n=a("rWKQ"),o=a.n(n);o.a},"5yj/":function(t,e,a){"use strict";var n=a("xbS4"),o=a.n(n);o.a},"9lkS":function(t,e,a){"use strict";var n=a("AeAW"),o=a.n(n);o.a},AeAW:function(t,e,a){},BiHb:function(t,e,a){"use strict";var n=a("i8Ah"),o=a.n(n);o.a},"EG/1":function(t,e,a){},EWTw:function(t,e,a){"use strict";var n=a("e6ga"),o=a.n(n);o.a},"Hm/9":function(t,e,a){},Iq1P:function(t,e,a){"use strict";var n=a("RHQk"),o=a.n(n);o.a},JHlD:function(t,e,a){"use strict";var n=a("j6lj"),o=a.n(n);o.a},KEwJ:function(t,e,a){"use strict";var n=a("n3If"),o=a.n(n);o.a},M2dp:function(t,e,a){},N2jd:function(t,e,a){"use strict";var n=a("oLHx"),o=a.n(n);o.a},OYgv:function(t,e,a){},QELj:function(t,e,a){"use strict";var n=a("jla9"),o=a.n(n);o.a},RHQk:function(t,e,a){},RYpV:function(t,e,a){},S4AP:function(t,e,a){"use strict";var n=a("4irR"),o=a.n(n);o.a},Vtdi:function(t,e,a){"use strict";a.r(e);a("91GP"),a("pIFo"),a("yt8O"),a("VRzm");var n=a("Kw5r"),o=a("1Cyj"),i=a("7eDf"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-app",{attrs:{params:t.f7Params}},[a("f7-statusbar"),a("f7-view",{staticClass:"ios-edges",attrs:{url:"/",main:!0,"push-state":!0,"push-state-root":t.root,"stack-pages":!0}})],1)},r=[],l=(a("SRfc"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{ref:"homePage",attrs:{"hide-navbar-on-scroll":t.hideBar,ptr:!0},on:{"page:init":t.onPageInit,"ptr:refresh":t.onRefresh}},[a("f7-navbar",[a("f7-nav-title",[t._v("V2EX × 🌀")]),a("f7-nav-right",[a("f7-link",{attrs:{"popover-open":".popover-menu","icon-ios":"f7:bars","icon-md":"material:menu"}})],1)],1),a("f7-toolbar",{attrs:{tabbar:"",labels:""}},[a("f7-link",{attrs:{"tab-link-active":"","tab-link":"",href:"/","icon-ios":"f7:chat_fill","icon-md":"material:chat_bubble",animate:!1,text:"最新"}}),a("f7-link",{attrs:{"tab-link":"",href:"/nodes/","icon-ios":"f7:keyboard","icon-md":"material:apps",animate:!1,text:"节点"}}),a("f7-link",{attrs:{"tab-link":"",href:"/discovery/","icon-ios":"f7:compass","icon-md":"material:explore",animate:!1,text:"发现"}}),a("f7-link",{attrs:{"tab-link":"",href:"/me/","icon-ios":"f7:person","icon-md":"material:person",animate:!1,text:"我"}})],1),a("f7-fab",{attrs:{slot:"fixed",position:"right-bottom"},slot:"fixed"},[a("f7-icon",{attrs:{ios:"f7:layers_fill",md:"material:layers"}}),a("f7-icon",{attrs:{ios:"f7:close",md:"material:close"}}),a("f7-fab-buttons",{attrs:{position:"top"}},t._l(t.tabConfig,function(e,n){return a("f7-fab-button",{key:n,on:{click:function(e){t.onFabClick(n)}}},[t._v("\n        "+t._s(e)+"\n      ")])}))],1),a("f7-list",{staticClass:"topic-list",attrs:{"media-list":""}},t._l(t.listData,function(e){return a("f7-list-item",{key:e.id,class:e.top?"top":"",attrs:{link:"/t/"+e.id}},[a("img",{attrs:{slot:"media",src:e.avatar},slot:"media"}),a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(e.title)+"\n      ")]),a("div",{attrs:{slot:"text"},slot:"text"},[t._v("\n        "+t._s(e.node)+"\n        "),e.time?[t._v("\n          • "+t._s(e.time)+"\n        ")]:t._e()],2),a("span",{attrs:{slot:"after"},slot:"after"},[a("f7-chip",{staticClass:"chip-container",attrs:{text:e.reply+""}})],1)])})),a("f7-popover",{staticClass:"popover-menu"},[a("f7-list",[a("f7-list-item",{attrs:{link:"/search/","popover-close":"",title:"搜索"}}),a("f7-list-item",{attrs:{link:"/recent/","popover-close":"",title:"最近主题"}})],1)],1)],1)}),c=[],f=a("1yJj"),u={components:{f7Page:i["E"],f7Navbar:i["D"],f7NavTitle:i["C"],f7NavRight:i["B"],f7List:i["s"],f7ListItem:i["u"],f7Link:i["r"],f7Icon:i["o"],f7Chip:i["j"],f7Fab:i["l"],f7FabButtons:i["n"],f7FabButton:i["m"],f7Toolbar:i["P"],f7Popover:i["H"]},data:function(){return{listData:[],lfKey:"homeData",tabConfig:{all:"全部",hot:"最热",city:"城市",play:"好玩",creative:"创意",tech:"技术"},hideBar:!1}},created:function(){var t=this;this.$lf.getItem(this.lfKey).then(function(e){e&&(t.listData=e)}).catch(function(t){console.log(t)}),"md"===this.$f7.theme&&(this.hideBar=!0)},methods:{onPageInit:function(){var t=this;this.$nextTick(function(){t.$f7.ptr.get(t.$refs.homePage.$el.querySelector(".ptr-content")).refresh()})},onRefresh:function(t,e){this.getData().then(function(){e()})},onFabClick:function(t){this.$f7router.navigate("/tab/".concat(t,"?title=").concat(this.tabConfig[t]))},getData:function(){var t=this;return this.$http.get(f["a"].new).then(function(e){e.success&&(t.listData=e.data,t.$lf.setItem(t.lfKey,e.data).catch(function(t){console.log(t)}))}).catch(function(t){console.log(t)})}}},h=u,m=(a("QELj"),a("KHd+")),p=Object(m["a"])(h,l,c,!1,null,null,null),d=p.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",[a("f7-navbar",[a("f7-nav-title",[t._v("发现")])],1),a("f7-toolbar",{attrs:{tabbar:"",labels:""}},[a("f7-link",{attrs:{"tab-link":"",href:"/","icon-ios":"f7:chat","icon-md":"material:chat_bubble",animate:!1,text:"最新"}}),a("f7-link",{attrs:{"tab-link":"",href:"/nodes/","icon-ios":"f7:keyboard","icon-md":"material:apps",animate:!1,text:"节点"}}),a("f7-link",{attrs:{href:"/discovery/","tab-link":"","tab-link-active":"","icon-ios":"f7:compass_fill","icon-md":"material:explore",animate:!1,text:"发现"}}),a("f7-link",{attrs:{"tab-link":"",href:"/me/","icon-ios":"f7:person","icon-md":"material:person",animate:!1,text:"我"}})],1),a("f7-list",[a("f7-list-item",{attrs:{link:"#",title:"热门"}},[a("div",{attrs:{slot:"media"},slot:"media"},[a("f7-icon",{attrs:{ios:"f7:graph_round_fill",md:"material:camera"}})],1)])],1)],1)},v=[],b={components:{f7Page:i["E"],f7Navbar:i["D"],f7NavTitle:i["C"],f7Link:i["r"],f7BlockTitle:i["e"],f7Toolbar:i["P"],f7List:i["s"],f7ListItem:i["u"],f7Icon:i["o"]},data:function(){return{}},methods:{}},k=b,_=(a("hP+Q"),Object(m["a"])(k,g,v,!1,null,"32f9a218",null)),y=_.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("f7-page",[n("f7-navbar",[n("f7-nav-title",[t._v("我")])],1),n("f7-toolbar",{attrs:{tabbar:"",labels:""}},[n("f7-link",{attrs:{"tab-link":"",href:"/","icon-ios":"f7:chat","icon-md":"material:chat_bubble",animate:!1,text:"最新"}}),n("f7-link",{attrs:{"tab-link":"",href:"/nodes/","icon-ios":"f7:keyboard","icon-md":"material:apps",animate:!1,text:"节点"}}),n("f7-link",{attrs:{href:"/discovery/","tab-link":"","icon-ios":"f7:compass","icon-md":"material:explore",animate:!1,text:"发现"}}),n("f7-link",{attrs:{"tab-link":"",href:"/me/","tab-link-active":"","icon-ios":"f7:person_fill","icon-md":"material:person",animate:!1,text:"我"}})],1),n("f7-list",{staticClass:"member-list",attrs:{"media-list":""}},[n("f7-list-item",{attrs:{link:"#"},on:{click:t.onUserClick}},[t.memberData.avatar?n("img",{attrs:{slot:"media",src:t.memberData.avatar},slot:"media"}):n("img",{attrs:{slot:"media",src:a("eVAu")},slot:"media"}),n("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(t.memberData.name?t.memberData.name:"w(ﾟДﾟ)w")+"\n      ")]),n("div",{attrs:{slot:"text"},slot:"text"},[t._v("\n        "+t._s(t.memberData.info?t.memberData.info:"失联人员")+"\n      ")])])],1),n("f7-list",[n("f7-list-item",{attrs:{link:"/setting/",title:"设置"}},[n("div",{attrs:{slot:"media"},slot:"media"},[n("f7-icon",{attrs:{ios:"f7:settings_fill",md:"material:settings"}})],1)])],1),n("f7-login-screen",{staticClass:"demo-login-screen",attrs:{opened:t.loginScreenOpened},on:{"loginscreen:closed":function(e){t.loginScreenOpened=!1}}},[n("f7-page",{attrs:{"login-screen":""}},[n("f7-login-screen-title",[t._v("V2EX")]),n("f7-list",{attrs:{form:""}},[n("f7-list-item",[n("f7-label",[t._v("用户名")]),n("f7-input",{attrs:{type:"text",placeholder:"用户名或电子邮箱地址"},on:{input:function(e){t.username.value=e.target.value}}})],1),n("f7-list-item",[n("f7-label",[t._v("密码")]),n("f7-input",{attrs:{type:"password",placeholder:""},on:{input:function(e){t.password.value=e.target.value}}})],1),n("f7-list-item",[n("f7-label",[t._v("验证码")]),n("f7-input",{attrs:{type:"text",placeholder:"请输入图中的验证码"},on:{input:function(e){t.captcha.value=e.target.value}}}),t.initLoginData.captcha?n("img",{staticClass:"captcha-img",attrs:{src:t.initLoginData.captcha,alt:"验证码"}}):t._e()],1)],1),n("f7-list",[n("f7-list-button",{on:{click:t.login}},[t._v("登录")]),n("f7-block-footer",[n("f7-link",{attrs:{link:"#"},on:{click:function(e){t.loginScreenOpened=!1}}},[t._v("\n            关闭\n          ")])],1)],1)],1)],1)],1)},x=[],I={components:{f7Page:i["E"],f7Navbar:i["D"],f7NavTitle:i["C"],f7Link:i["r"],f7Toolbar:i["P"],f7List:i["s"],f7ListItem:i["u"],f7Icon:i["o"],f7LoginScreen:i["v"],f7Input:i["p"],f7Button:i["f"],f7LoginScreenTitle:i["w"],f7BlockFooter:i["d"],f7Label:i["q"],f7ListButton:i["t"]},data:function(){return{initLoginData:{},loginScreenOpened:!1,memberData:{},username:{name:"",value:""},password:{name:"",value:""},captcha:{name:"",value:""},userInfoKey:"userInfo"}},created:function(){var t=this;this.$lf.getItem(this.userInfoKey).then(function(e){e&&e.isLogin&&t.$lf.getItem("/member/".concat(e.name)).then(function(e){e&&(t.memberData=e)}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)})},methods:{onUserClick:function(){var t=this.memberData.name;t?this.$f7router.navigate("/member/".concat(t)):this.showLoginPage()},showLoginPage:function(){var t=this;this.$f7.preloader.show(),this.$http.get("".concat(f["a"].initLogin)).then(function(e){e.success&&(t.initLoginData=e.data,t.username.name=e.data[0],t.password.name=e.data[1],t.captcha.name=e.data[2],t.$nextTick(function(){t.loginScreenOpened=!0}))}).catch(function(t){console.log(t)}).finally(function(){t.$f7.preloader.hide()})},login:function(){var t=this;this.$f7.preloader.show(),this.$http.post({url:f["a"].login,data:{once:this.initLoginData.once,cookie:this.initLoginData.cookie,key0:this.username.name,value0:this.username.value,key1:this.password.name,value1:this.password.value,key2:this.captcha.name,value2:this.captcha.value}}).then(function(e){e.success?(t.loginScreenOpened=!1,t.getUserData()):t.captcha.value=""}).catch(function(t){console.log(t)}).finally(function(){t.$f7.preloader.hide()})},getUserData:function(){var t=this;return this.$http.get("".concat(f["a"].member,"/").concat(this.username.value)).then(function(e){e.success&&(t.memberData=e.data,t.$lf.setItem("/member/".concat(t.username.value),e.data).catch(function(t){console.log(t)}),t.$lf.setItem(t.userInfoKey,{isLogin:!0,name:t.username.value}).catch(function(t){console.log(t)}))}).catch(function(t){console.log(t)})}}},C=I,D=(a("JHlD"),Object(m["a"])(C,w,x,!1,null,"51f5d344",null)),P=D.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{staticClass:"messages-page",attrs:{"infinite-preloader":t.showPreloader,infinite:!0},on:{"page:init":t.onPageInit,infinite:t.onInfinite}},[a("f7-navbar",{attrs:{title:t.title,"back-link":"返回",subtitle:t.count}},[a("f7-nav-right",[a("f7-link",{attrs:{"icon-ios":"f7:more_fill","icon-md":"material:menu"},on:{click:t.onNavRightClick}})],1)],1),t.isInit?t._e():a("f7-block",{staticClass:"text-align-center"},[a("f7-preloader")],1),a("f7-messages",{ref:"messages",staticClass:"v2ex-message-list",attrs:{"scroll-messages":!1}},t._l(t.messagesData,function(e,n){return a("f7-message",{key:n,attrs:{type:e.type,image:e.image,name:e.name,avatar:e.avatar,first:t.isFirstMessage(e,n),last:t.isLastMessage(e,n),tail:t.isTailMessage(e,n)},on:{"click:avatar":function(a){t.onClickMember(e.name)},"click:bubble":function(a){t.onMessageClick(n,e.meta.floor,a)}}},[e.text?a("div",{attrs:{slot:"text"},domProps:{innerHTML:t._s((e.quoteHtml||"")+e.text)},slot:"text"}):t._e(),a("div",{attrs:{slot:"text-header"},slot:"text-header"},[e.meta.floor?[t._v("\n          "+t._s(e.meta.floor)+"楼\n          "),t.author===e.name?[t._v("\n            • 楼主\n          ")]:t._e()]:t._e(),e.meta.addition?[t._v("\n          "+t._s(e.meta.addition.title)+"\n        ")]:t._e()],2),a("div",{attrs:{slot:"text-footer"},slot:"text-footer"},[e.meta.createTime?[t._v("\n          "+t._s(e.meta.createTime)+"\n        ")]:t._e(),e.meta.status?[t._v("\n          "+t._s(e.meta.status)+"\n        ")]:t._e(),e.meta.thank?[t._v("\n          "+t._s(e.meta.thank)+"\n        ")]:t._e(),e.meta.click?[t._v("\n          • "+t._s(e.meta.click)+"\n        ")]:t._e()],2)])})),a("f7-photo-browser",{key:t.photoBrowserKey,ref:"photoBrowser",attrs:{photos:t.photos,theme:"dark",type:"popup","back-link-text":"关闭","navbar-of-text":"/",toolbar:!1}}),a("f7-popover",{ref:"popover"},[a("f7-list",[t.isShowChat?a("f7-list-item",{attrs:{link:"","popover-close":"",title:"查看对话"},on:{click:t.onShowChatClick}}):t._e(),t.isShowReply?a("f7-list-item",{attrs:{link:"","popover-close":"",title:"回复ta的"},on:{click:t.onShowReplyClick}}):t._e(),t.isShowPopup?a("f7-list-item",{attrs:{link:"","popover-close":"",title:"新页面查看"},on:{click:t.showPopup}}):t._e()],1)],1),a("f7-popup",{staticClass:"demo-popup",attrs:{opened:t.popupOpened},on:{"popup:closed":function(e){t.popupOpened=!1}}},[a("f7-page",[a("f7-navbar",{attrs:{title:"内容"}},[a("f7-nav-right",[a("f7-link",{attrs:{"popup-close":""}},[t._v("关闭")])],1)],1),a("f7-block",{staticClass:"popup-block-content",domProps:{innerHTML:t._s(t.popupContent)}})],1)],1)],1)},L=[],T=(a("rGqo"),a("iv4g")),B=a("yT7P"),S={components:{f7Navbar:i["D"],f7NavRight:i["B"],f7Page:i["E"],f7Messages:i["z"],f7MessagesTitle:i["A"],f7Message:i["x"],f7Messagebar:i["y"],f7Link:i["r"],f7Preloader:i["J"],f7Block:i["c"],f7Icon:i["o"],f7PhotoBrowser:i["G"],f7Popover:i["H"],f7List:i["s"],f7ListItem:i["u"],f7Popup:i["I"]},created:function(){var t=this.$f7route.params.id,e="/t/".concat(t,"/topic");this.id=t,this.lfKey=e},mounted:function(){var t=this;this.$f7ready(function(){t.messages=t.$refs.messages.f7Messages})},data:function(){return{messagesData:[],id:0,lfKey:"",p:1,total:1,isInit:!1,photos:[],node:{},dialogData:[],photoBrowserKey:0,allowInfinite:!0,showPreloader:!0,count:"",author:"",popupOpened:!1,popupContent:"",isShowChat:!0,isShowPopup:!0,isShowReply:!1,title:"群聊"}},methods:{onPageInit:function(){var t=this;this.getData().then(function(){t.isInit=!0})},onInfinite:function(){var t=this;this.allowInfinite&&(this.allowInfinite=!1,this.getData().then(function(){t.showPreloader=t.allowInfinite=!(t.p>t.total)}))},onNavRightClick:function(){this.node.url&&this.$f7router.navigate("/chatDetail/".concat(this.id))},showPopover:function(t,e){var a=this;if(0!==t){if(this.messagesData[t].meta.at){var n=Object(B["a"])({},this.messagesData[t]),o=Object(T["a"])(n.meta.at),i=o.length;if(i>0){for(var s=0,r=[],l=this.messagesData.slice(0,t),c=t-1;c>=0;c--){var f=l[c],u=o.indexOf(f.name);if(-1!==u&&!r[u]&&(r[u]=f,++s>=i))break}s===i?(n.type="sent",this.dialogData=r.concat(n),this.isShowChat=!0):this.isShowChat=!1}else this.isShowChat=!1}else this.isShowChat=!1;this.popupContent=this.messagesData[t].text,this.isShowPopup=!0,this.$nextTick(function(){a.$refs.popover.open(e.target)})}},showPopup:function(){this.popupOpened=!0},onShowChatClick:function(){this.$f7router.navigate("/dialog/".concat(encodeURIComponent(JSON.stringify(this.dialogData))))},getData:function(){var t=this,e=this.id;return this.$http.get("".concat(f["a"].t,"/").concat(e,"?p=").concat(this.p)).then(function(e){if(e.success){var a=[],n=e.data.topic;t.count=n.count,t.title=n.title,t.$lf.setItem(t.lfKey,n).catch(function(t){console.log(t)}),1===t.p&&(t.author=n.author,a.push({type:"received",name:n.author,text:n.title,avatar:n.avatar,meta:{createTime:n.createTime,click:n.click}}),""!==n.content&&a.push({type:"received",name:n.author,text:n.content,avatar:n.avatar,meta:{status:n.status}}),n.additions&&n.additions.forEach(function(t){a.push({type:"received",name:n.author,text:t.content,avatar:n.avatar,meta:{addition:{title:t.title}}})}),t.node=n.node);var o=t.messagesData.concat(e.data.reply).map(function(t){return t.name||(t.name=t.author,t.text=t.content),t});e.data.reply.forEach(function(t,e){var n="";if(t.at&&t.at.length>0)for(var i=t.at,s=i.length,r=0;r<s;r++)for(var l=i[r],c=0;c<o.length;c++)if(o[c].name===l){n+='<div class="quote-html">'.concat(o[c].text,"</div>");break}a.push({name:t.author,type:"received",text:t.content,quoteHtml:n,avatar:t.avatar,meta:{floor:t.floor,thank:t.thank,at:t.at}})}),t.p>=e.data.total&&(t.showPreloader=!1,t.allowInfinite=!1),t.messagesData=t.messagesData.concat(a),t.p=t.p+1,t.total=e.data.total}})},onMessageClick:function(t,e,a){var n=this,o=a.target.nodeName.toLowerCase();if("img"===o){var i=a.target.getAttribute("src");i&&(this.photos=[i],this.photoBrowserKey=+new Date,this.$nextTick(function(){n.$refs.photoBrowser.open(0)}))}else"a"!==o&&this.showPopover(t,a)},onClickMember:function(t){this.$f7router.navigate("/member/".concat(t,"/"))},onShowReplyClick:function(){},isFirstMessage:function(t,e){var a=this,n=a.messagesData[e-1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)},isLastMessage:function(t,e){var a=this,n=a.messagesData[e+1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)},isTailMessage:function(t,e){var a=this,n=a.messagesData[e+1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)}}},j=S,M=(a("9lkS"),Object(m["a"])(j,$,L,!1,null,null,null)),O=M.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{ref:"nodesPage",staticClass:"nodes-page",attrs:{"hide-navbar-on-scroll":t.hideBar,ptr:!0},on:{"page:init":t.onPageInit,"ptr:refresh":t.onRefresh}},[a("f7-navbar",[a("f7-nav-title",[t._v("节点")]),a("f7-nav-right",[a("f7-link",{attrs:{href:"/all-nodes/","icon-ios":"f7:world","icon-md":"material:language"}})],1)],1),a("f7-toolbar",{attrs:{tabbar:"",labels:""}},[a("f7-link",{attrs:{"tab-link":"",href:"/","icon-ios":"f7:chat","icon-md":"material:chat_bubble",animate:!1,text:"最新"}}),a("f7-link",{attrs:{"tab-link-active":"","tab-link":"",href:"/nodes/","icon-ios":"f7:keyboard_fill","icon-md":"material:apps",animate:!1,text:"节点"}}),a("f7-link",{attrs:{href:"/discovery/","tab-link":"","icon-ios":"f7:compass","icon-md":"material:explore",animate:!1,text:"发现"}}),a("f7-link",{attrs:{"tab-link":"",href:"/me/","icon-ios":"f7:person","icon-md":"material:person",animate:!1,text:"我"}})],1),t._l(t.nodesData,function(e){return[a("f7-block-title",{staticClass:"group-title"},[t._v("\n      "+t._s(e.groupName)+"\n    ")]),a("f7-block",{staticClass:"node-container",attrs:{strong:""}},t._l(e.nodes,function(e){return a("f7-chip",{staticClass:"node-chip",attrs:{outline:"",text:e.name},on:{click:function(a){t.onChipClick(e.url,e.name)}}})}))]})],2)},N=[],K={components:{f7Page:i["E"],f7Navbar:i["D"],f7NavTitle:i["C"],f7Link:i["r"],f7BlockTitle:i["e"],f7Chip:i["j"],f7Block:i["c"],f7NavRight:i["B"],f7Toolbar:i["P"]},created:function(){"md"===this.$f7.theme&&(this.hideBar=!0)},data:function(){return{nodesData:[],lfKey:"nodesData",hideBar:!1}},methods:{onPageInit:function(){var t=this;this.$lf.getItem(this.lfKey).then(function(e){e?t.nodesData=e:t.$nextTick(function(){t.$f7.ptr.get(t.$refs.nodesPage.$el.querySelector(".ptr-content")).refresh()})}).catch(function(t){console.log(t)})},onRefresh:function(t,e){this.getData().then(function(){e()})},onChipClick:function(t,e){this.$f7router.navigate("".concat(t,"/?title=").concat(e))},getData:function(){var t=this;return this.$http.get(f["a"].nodes).then(function(e){e.success&&(t.nodesData=e.data,t.$lf.setItem(t.lfKey,e.data).catch(function(t){console.log(t)}))}).catch(function(t){console.log(t)})}}},R=K,A=(a("BiHb"),Object(m["a"])(R,E,N,!1,null,null,null)),H=A.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{attrs:{"infinite-preloader":t.showPreloader,infinite:!0},on:{"page:init":t.onPageInit,infinite:t.onInfinite}},[a("f7-navbar",{attrs:{"back-link":"返回",title:t.title,subtitle:t.topicCount}},[a("f7-nav-right",[a("f7-link",{attrs:{"popover-open":".node-menu","icon-ios":"f7:bars","icon-md":"material:menu"}})],1)],1),a("f7-list",{staticClass:"topic-list",attrs:{"media-list":""}},t._l(t.listData,function(e){return a("f7-list-item",{key:e.id,class:e.top?"top":"",attrs:{link:"/t/"+e.id}},[a("img",{attrs:{slot:"media",src:e.avatar},slot:"media"}),a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(e.title)+"\n      ")]),a("div",{attrs:{slot:"text"},slot:"text"},[e.time?[t._v("\n          "+t._s(e.time)+"\n        ")]:t._e()],2),a("span",{attrs:{slot:"after"},slot:"after"},[a("f7-chip",{staticClass:"chip-container",attrs:{text:e.reply+""}})],1)])})),a("f7-popover",{ref:"nodeMenu",staticClass:"node-menu"},[a("f7-list",[a("f7-list-item",{attrs:{link:!1,title:"乱序模式"}},[a("f7-toggle",{attrs:{color:"blue"},on:{"toggle:change":t.onToggleChange}})],1)],1)],1)],1)},J=[],F={created:function(){this.name=this.$f7route.params.name;var t=this.$f7route.query.title;t||(t="加载中..."),this.title=t},components:{f7Page:i["E"],f7Navbar:i["D"],f7List:i["s"],f7ListItem:i["u"],f7Link:i["r"],f7Icon:i["o"],f7Chip:i["j"],f7Block:i["c"],f7NavRight:i["B"],f7Popover:i["H"],f7Toggle:i["O"]},data:function(){return{listData:[],name:"",title:"",p:1,total:1,topicCount:"",allowInfinite:!0,showPreloader:!0,isRandom:!1}},methods:{onPageInit:function(){this.getData()},onInfinite:function(){var t=this;this.allowInfinite&&(this.allowInfinite=!1,this.getData().then(function(){t.showPreloader=t.allowInfinite=!(t.p>t.total)}))},onToggleChange:function(t){var e=this;this.isRandom=t,this.listData=[],this.p=t?this.getRandomPage():1,this.allowInfinite&&(this.allowInfinite=!1,this.getData().then(function(){e.allowInfinite=!0}))},getRandomPage:function(){return Math.floor(1+Math.random()*this.total)},getData:function(){var t=this,e=this.name;return this.$http.get("".concat(f["a"].node,"/").concat(e,"?p=").concat(this.p)).then(function(e){e.success&&(t.p>=e.data.total&&(t.showPreloader=!1,t.allowInfinite=!1),t.listData=t.listData.concat(e.data.list),t.p=t.isRandom?t.getRandomPage():t.p+1,t.total=e.data.total,t.title=e.data.node.name,t.topicCount="".concat(e.data.node.count," 主题"))}).catch(function(t){console.log(t)})}}},z=F,V=(a("KEwJ"),Object(m["a"])(z,q,J,!1,null,null,null)),G=V.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{on:{"page:init":t.onPageInit}},[a("f7-navbar",{attrs:{"back-link":"返回",title:t.title}}),t.isInit?t._e():a("f7-block",{staticClass:"text-align-center"},[a("f7-preloader")],1),a("f7-list",{staticClass:"topic-list",attrs:{"media-list":""}},t._l(t.listData,function(e){return a("f7-list-item",{key:e.id,class:e.top?"top":"",attrs:{link:"/t/"+e.id}},[a("img",{attrs:{slot:"media",src:e.avatar},slot:"media"}),a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(e.title)+"\n      ")]),a("div",{attrs:{slot:"text"},slot:"text"},[t._v("\n        "+t._s(e.node)+"\n        "),e.time?[t._v("\n          • "+t._s(e.time)+"\n        ")]:t._e()],2),a("span",{attrs:{slot:"after"},slot:"after"},[a("f7-chip",{staticClass:"chip-container",attrs:{text:e.reply+""}})],1)])}))],1)},Y=[],U={components:{f7Page:i["E"],f7Navbar:i["D"],f7List:i["s"],f7ListItem:i["u"],f7Link:i["r"],f7Icon:i["o"],f7Chip:i["j"],f7Block:i["c"],f7Preloader:i["J"]},data:function(){return{listData:[],name:"",title:"",isInit:!1}},created:function(){this.name=this.$f7route.params.name,this.title=this.$f7route.query.title},methods:{onPageInit:function(){var t=this;this.getData().then(function(){t.isInit=!0})},getData:function(){var t=this,e=this.name;return this.$http.get("".concat(f["a"].tab,"/").concat(e,"?p=").concat(this.p)).then(function(e){e.success&&(t.listData=e.data)}).catch(function(t){console.log(t)})}}},W=U,X=(a("bA33"),Object(m["a"])(W,Q,Y,!1,null,null,null)),Z=X.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{on:{"page:init":t.onPageInit}},[a("f7-navbar",{attrs:{title:"详细资料","back-link":"返回"}}),t.isInit?t._e():a("f7-block",{staticClass:"text-align-center"},[a("f7-preloader")],1),t.memberData.name?a("f7-list",{staticClass:"member-list",attrs:{"media-list":""}},[a("f7-list-item",[a("img",{attrs:{slot:"media",src:t.memberData.avatar},on:{click:function(e){t.$refs.photoBrowser.open()}},slot:"media"}),a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(t.memberData.name)+"\n      ")]),a("div",{attrs:{slot:"text"},slot:"text"},[t._v("\n        "+t._s(t.memberData.info)+"\n      ")])])],1):t._e(),t.memberData.rank?a("f7-list",[a("f7-list-item",{attrs:{link:"",title:"今日活跃度排名",after:t.memberData.rank}})],1):t._e(),t.memberData.reply&&t.memberData.topic?a("f7-list",{staticClass:"creation-list"},[a("f7-list-item",{attrs:{link:t.memberData.topic.has,title:"创建的主题",after:t.memberData.topic.reason}}),a("f7-list-item",{attrs:{link:t.memberData.reply.has,title:"创建的回复",after:t.memberData.reply.reason}})],1):t._e(),t.memberData.avatar?a("f7-photo-browser",{ref:"photoBrowser",attrs:{photos:[t.memberData.avatar],theme:"dark",type:"popup","back-link-text":"关闭","navbar-of-text":"/",toolbar:!1}}):t._e()],1)},et=[],at={components:{f7Page:i["E"],f7Navbar:i["D"],f7NavTitle:i["C"],f7Link:i["r"],f7BlockTitle:i["e"],f7List:i["s"],f7ListItem:i["u"],f7Preloader:i["J"],f7Block:i["c"],f7PhotoBrowser:i["G"]},created:function(){var t=this.$f7route.params.name,e="/member/".concat(this.name);this.name=t,this.lfKey=e},data:function(){return{memberData:{},name:"",isInit:!1,lfKey:""}},methods:{onPageInit:function(){var t=this;this.getData().then(function(){t.isInit=!0})},getData:function(){var t=this;return this.$http.get("".concat(f["a"].member,"/").concat(this.name)).then(function(e){e.success&&(t.memberData=e.data,t.$lf.setItem(t.lfKey,e.data).catch(function(t){console.log(t)}))}).catch(function(t){console.log(t)})}}},nt=at,ot=(a("EWTw"),Object(m["a"])(nt,tt,et,!1,null,null,null)),it=ot.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{attrs:{"infinite-preloader":t.showPreloader,infinite:!0},on:{"page:init":t.onPageInit,infinite:t.onInfinite}},[a("f7-navbar",{attrs:{"back-link":"返回",title:"创建的主题"}}),a("f7-list",{staticClass:"topic-list",attrs:{"media-list":""}},t._l(t.listData,function(e){return a("f7-list-item",{key:e.id,attrs:{link:"/t/"+e.id}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(e.title)+"\n      ")]),a("div",{attrs:{slot:"text"},slot:"text"},[e.time?[t._v("\n          "+t._s(e.time)+"\n        ")]:t._e()],2),a("span",{attrs:{slot:"after"},slot:"after"},[a("f7-chip",{staticClass:"chip-container",attrs:{text:e.reply+""}})],1)])}))],1)},rt=[],lt={created:function(){this.name=this.$f7route.params.name},components:{f7Page:i["E"],f7Navbar:i["D"],f7List:i["s"],f7ListItem:i["u"],f7Link:i["r"],f7Icon:i["o"],f7Chip:i["j"],f7Block:i["c"]},data:function(){return{listData:[],p:1,total:1,allowInfinite:!0,showPreloader:!0}},methods:{onPageInit:function(){this.getData()},onInfinite:function(){var t=this;this.allowInfinite&&(this.allowInfinite=!1,this.getData().then(function(){t.showPreloader=t.allowInfinite=!(t.p>t.total)}))},getData:function(){var t=this;return this.$http.get("".concat(f["a"].member,"/").concat(this.name,"/topic?p=").concat(this.p)).then(function(e){e.success&&(t.p>=e.data.total&&(t.showPreloader=!1,t.allowInfinite=!1),t.listData=t.listData.concat(e.data.topic),t.p=t.p+1,t.total=e.data.total)}).catch(function(t){console.log(t)})}}},ct=lt,ft=(a("N2jd"),Object(m["a"])(ct,st,rt,!1,null,null,null)),ut=ft.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{attrs:{"infinite-preloader":t.showPreloader,infinite:!0},on:{"page:init":t.onPageInit,infinite:t.onInfinite}},[a("f7-navbar",{attrs:{title:"创建的回复","back-link":"返回"}}),t.isInit?t._e():a("f7-block",{staticClass:"text-align-center"},[a("f7-preloader")],1),a("f7-messages",{ref:"messages",staticClass:"v2ex-message-list",attrs:{"scroll-messages":!1}},t._l(t.messagesData,function(e,n){return a("f7-message",{key:n,attrs:{type:e.type,name:e.name,first:t.isFirstMessage(e,n),last:t.isLastMessage(e,n),tail:t.isTailMessage(e,n)},on:{click:t.onMessageClick}},[e.text?a("div",{attrs:{slot:"text"},domProps:{innerHTML:t._s(e.text)},slot:"text"}):t._e(),a("div",{attrs:{slot:"text-footer"},slot:"text-footer"},[e.meta.time?[t._v("\n          "+t._s(e.meta.time)+"\n        ")]:t._e(),e.meta.node?[t._v("\n          "+t._s(e.meta.node)+"\n        ")]:t._e()],2)])})),a("f7-photo-browser",{key:t.photoBrowserKey,ref:"photoBrowser",attrs:{photos:t.photos,theme:"dark",type:"popup","back-link-text":"关闭","navbar-of-text":"/",toolbar:!1}})],1)},mt=[],pt={components:{f7Navbar:i["D"],f7Page:i["E"],f7Messages:i["z"],f7MessagesTitle:i["A"],f7Message:i["x"],f7Messagebar:i["y"],f7Link:i["r"],f7Preloader:i["J"],f7Block:i["c"],f7Icon:i["o"],f7PhotoBrowser:i["G"]},created:function(){this.name=this.$f7route.params.name},mounted:function(){var t=this;this.$f7ready(function(){t.messages=t.$refs.messages.f7Messages})},data:function(){return{messagesData:[],id:0,p:1,total:1,isInit:!1,photos:[],photoBrowserKey:0,allowInfinite:!0,showPreloader:!0}},methods:{onPageInit:function(){var t=this;this.getData().then(function(){t.isInit=!0})},onInfinite:function(){var t=this;this.allowInfinite&&(this.allowInfinite=!1,this.getData().then(function(){t.showPreloader=t.allowInfinite=!(t.p>t.total)}))},getData:function(){var t=this;return this.$http.get("".concat(f["a"].member,"/").concat(this.name,"/reply?p=").concat(this.p)).then(function(e){if(e.success){var a=[],n=t.name;e.data.reply.forEach(function(t){var e=t.received,o=t.sent;a.push({name:e.author,type:"received",text:e.content,meta:{node:e.node.name}}),a.push({name:n,type:"sent",text:o.content,meta:{time:o.time}})}),t.p>=e.data.total&&(t.showPreloader=!1,t.allowInfinite=!1),t.messagesData=t.messagesData.concat(a),t.p=t.p+1,t.total=e.data.total}})},onMessageClick:function(t){var e=this;if("img"===t.target.nodeName.toLowerCase()){var a=t.target.getAttribute("src");a&&(this.photos=[a],this.photoBrowserKey=+new Date,this.$nextTick(function(){e.$refs.photoBrowser.open(0)}))}},isFirstMessage:function(t,e){var a=this,n=a.messagesData[e-1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)},isLastMessage:function(t,e){var a=this,n=a.messagesData[e+1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)},isTailMessage:function(t,e){var a=this,n=a.messagesData[e+1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)}}},dt=pt,gt=(a("5NaC"),Object(m["a"])(dt,ht,mt,!1,null,null,null)),vt=gt.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{staticClass:"chat-detail-page"},[a("f7-navbar",{attrs:{title:"聊天信息","back-link":"返回"}}),t.chatInfo?a("f7-list",[a("f7-list-item",{attrs:{link:t.chatInfo.node.url+"?title="+t.chatInfo.node.name,title:"所在节点",after:t.chatInfo.node.name}}),a("f7-list-item",{attrs:{link:"https://www.v2ex.com/t/"+t.id,title:"查看原帖",target:"_blank",after:"/t/"+t.id,external:!0}})],1):t._e(),t.chatInfo&&t.chatInfo.tag.length>0?[a("f7-block-title",{staticClass:"group-title"},[t._v("\n      标签\n    ")]),a("f7-block",{staticClass:"node-container",attrs:{strong:""}},t._l(t.chatInfo.tag,function(e){return a("f7-chip",{staticClass:"node-chip",attrs:{outline:"",text:e.name},on:{click:function(a){t.onChipClick(e.url,e.name)}}})}))]:t._e()],2)},kt=[],_t={components:{f7Page:i["E"],f7Navbar:i["D"],f7NavTitle:i["C"],f7Link:i["r"],f7List:i["s"],f7ListItem:i["u"],f7BlockTitle:i["e"],f7Chip:i["j"],f7Block:i["c"]},created:function(){var t=this,e=this.$f7route.params.id;this.id=e,this.$lf.getItem("/t/".concat(e,"/topic")).then(function(e){t.chatInfo=e}).catch(function(t){console.log(t)})},data:function(){return{id:0,chatInfo:null}},methods:{onChipClick:function(t,e){this.$f7router.navigate("".concat(t,"?title=").concat(e))}}},yt=_t,wt=(a("S4AP"),Object(m["a"])(yt,bt,kt,!1,null,null,null)),xt=wt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{staticClass:"messages-page",on:{"page:init":t.onPageInit}},[a("f7-navbar",{attrs:{title:"对话详情","back-link":"返回"}}),a("f7-messages",{ref:"dialog",staticClass:"v2ex-message-list",attrs:{"scroll-messages":!1}},t._l(t.messagesData,function(e,n){return a("f7-message",{key:n,attrs:{type:e.type,image:e.image,name:e.name,avatar:e.avatar,first:t.isFirstMessage(e,n),last:t.isLastMessage(e,n),tail:t.isTailMessage(e,n)},on:{"click:avatar":function(a){t.onClickMember(e.name)},click:t.onMessageClick}},[e.text?a("div",{attrs:{slot:"text"},domProps:{innerHTML:t._s(e.text)},slot:"text"}):t._e(),e.meta.floor?a("div",{attrs:{slot:"text-header"},slot:"text-header"},[t._v("\n        "+t._s(e.meta.floor)+"楼\n      ")]):t._e(),e.meta.addition?a("div",{attrs:{slot:"text-header"},slot:"text-header"},[t._v("\n        "+t._s(e.meta.addition.title)+"\n      ")]):t._e(),a("div",{attrs:{slot:"text-footer"},slot:"text-footer"},[e.meta.time?[t._v("\n          "+t._s(e.meta.time)+"\n        ")]:t._e(),e.meta.status?[t._v("\n          "+t._s(e.meta.status)+"\n        ")]:t._e(),e.meta.addition?[t._v("\n          "+t._s(e.meta.addition.time)+"\n        ")]:t._e(),e.meta.thank?[t._v("\n          • "),a("span",[t._v(t._s(e.meta.thank))])]:t._e()],2)])})),a("f7-photo-browser",{key:t.photoBrowserKey,ref:"photoBrowser",attrs:{photos:t.photos,theme:"dark",type:"popup","back-link-text":"关闭","navbar-of-text":"/",toolbar:!1}})],1)},Ct=[],Dt={components:{f7Navbar:i["D"],f7Page:i["E"],f7Messages:i["z"],f7MessagesTitle:i["A"],f7Message:i["x"],f7Messagebar:i["y"],f7Link:i["r"],f7PhotoBrowser:i["G"]},mounted:function(){var t=this;this.$f7ready(function(){t.messages=t.$refs.dialog.f7Messages})},data:function(){return{messagesData:[],photos:[],photoBrowserKey:0}},methods:{onPageInit:function(){this.messagesData=JSON.parse(decodeURIComponent(this.$f7route.params.chatData))},onClickMember:function(t){this.$f7router.navigate("/member/".concat(t,"/"))},onMessageClick:function(t){var e=this;if("img"===t.target.nodeName.toLowerCase()){var a=t.target.getAttribute("src");a&&(this.photos=[a],this.photoBrowserKey=+new Date,this.$nextTick(function(){e.$refs.photoBrowser.open(0)}))}},isFirstMessage:function(t,e){var a=this,n=a.messagesData[e-1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)},isLastMessage:function(t,e){var a=this,n=a.messagesData[e+1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)},isTailMessage:function(t,e){var a=this,n=a.messagesData[e+1];return!t.isTitle&&(!n||n.type!==t.type||n.name!==t.name)}}},Pt=Dt,$t=(a("YMuy"),Object(m["a"])(Pt,It,Ct,!1,null,null,null)),Lt=$t.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{staticClass:"search-page",attrs:{"infinite-preloader":t.showPreloader,infinite:!0},on:{infinite:t.onInfinite}},[a("f7-navbar",{attrs:{"back-link":"返回",title:"搜索"}},[a("f7-subnavbar",{attrs:{inner:!1}},[a("f7-searchbar",{attrs:{"custom-search":!0,placeholder:"节点、帖子","disable-button-text":"取消"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}}})],1)],1),t.isSearching?a("f7-block",{staticClass:"text-align-center"},[a("f7-preloader")],1):t._e(),a("div",{staticClass:"search-card-container"},t._l(t.result,function(e){return a("f7-card",{key:e.url},[a("f7-card-header",[a("f7-link",{attrs:{href:e.url,text:e.title}})],1),a("f7-card-content",[t._v("\n        "+t._s(e.desc)+"\n      ")])],1)}))],1)},Bt=[],St=(a("OG14"),{components:{f7Navbar:i["D"],f7Page:i["E"],f7Searchbar:i["L"],f7Subnavbar:i["N"],f7Card:i["g"],f7CardHeader:i["i"],f7CardContent:i["h"],f7Link:i["r"],f7Preloader:i["J"],f7Block:i["c"]},data:function(){return{query:"",result:[],isSearching:!1,p:1,showPreloader:!1}},methods:{search:function(t){this.query=t.target.value},getSearchData:function(){var t=this;return this.isSearching=!0,this.$http.get("".concat(f["a"].search,"q=").concat(this.query,"&p=").concat(this.p)).then(function(e){e.success&&(t.result=t.result.concat(e.data),t.p=t.p+1)}).catch(function(t){console.log(t)}).finally(function(){t.isSearching=!1})},onInfinite:function(){var t=this;this.isSearching||(this.showPreloader=!0,this.getSearchData().then(function(){t.showPreloader=!1}))}},watch:{query:function(){var t=this;this.p=1,this.result=[],this.showPreloader=!1,this.$nextTick(function(){t.getSearchData()})}}}),jt=St,Mt=(a("udCz"),Object(m["a"])(jt,Tt,Bt,!1,null,null,null)),Ot=Mt.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",[a("f7-navbar",{attrs:{title:"设置","back-link":"返回"}}),a("f7-block-title",{staticClass:"group-title"}),a("f7-list",[a("f7-list-item",{attrs:{link:"/color/",title:"颜色"}}),a("f7-list-item",{attrs:{link:"#",title:"清除缓存"},on:{click:t.clearStorage}})],1),a("f7-block-title",[t._v("主题")]),a("f7-list",t._l(t.themeList,function(e){return a("f7-list-item",{key:e.value,attrs:{radio:"",checked:e.value===t.theme,value:e.value,title:e.title,name:"theme"},on:{change:t.onThemeChange}})})),a("f7-block-title",[t._v("接口域名")]),a("f7-list",t._l(t.hostObj,function(e){return a("f7-list-item",{key:e.value,attrs:{radio:"",checked:e.value===t.host,value:e.value,title:e.name,name:"host"},on:{change:t.onHostChange}})})),a("f7-list",{attrs:{inset:""}},[a("f7-list-button",{attrs:{title:"退出登录",color:"red"},on:{click:t.onLogoutClick}})],1)],1)},Nt=[],Kt={0:{name:"Auto",value:"auto"},1:{name:"avosapps.us",value:"https://ibdkopi6vn.avosapps.us"},2:{name:"leanapp.cn",value:"https://sy2bnjwp1a.leanapp.cn"}},Rt=Kt,At={components:{f7Page:i["E"],f7Navbar:i["D"],f7NavTitle:i["C"],f7Link:i["r"],f7BlockTitle:i["e"],f7Chip:i["j"],f7Block:i["c"],f7Preloader:i["J"],f7List:i["s"],f7ListItem:i["u"],f7ListButton:i["t"]},created:function(){var t=localStorage.getItem(this.themeKey);t&&(this.theme=t);var e=localStorage.getItem(this.hostKey);e&&(this.host=e),this.hostObj=Object(B["a"])({},Rt)},data:function(){return{themeKey:"theme",hostKey:"host",theme:"auto",host:"auto",themeList:[{title:"Auto",value:"auto"},{title:"iOS",value:"ios"},{title:"Material Design",value:"md"}],hostObj:{},userInfoKey:"userInfo"}},methods:{onThemeChange:function(t){localStorage.setItem(this.themeKey,t.target.value),location.reload(!0)},onHostChange:function(t){localStorage.setItem(this.hostKey,t.target.value)},onLogoutClick:function(){var t=this;this.$f7.preloader.show(),this.$http.post({url:f["a"].logout}).then(function(){t.$lf.setItem(t.userInfoKey,{isLogin:!1}).then(function(){t.$f7router.back("/me/",{ignoreCache:!0})}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)}).finally(function(){t.$f7.preloader.hide()})},clearStorage:function(){this.$lf.clear().then(function(){localStorage.clear()}).catch(function(t){console.log(t)})}}},Ht=At,qt=(a("5yj/"),Object(m["a"])(Ht,Et,Nt,!1,null,null,null)),Jt=qt.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",[a("f7-navbar",{attrs:{title:"颜色","back-link":"返回"}}),a("f7-block-title",[t._v("Layout Themes")]),a("f7-block",[a("f7-row",[a("f7-col",{staticClass:"bg-color-white",staticStyle:{cursor:"pointer",padding:"30px",border:"1px solid rgba(0,0,0,0.1)"},attrs:{width:"50"},nativeOn:{click:function(e){t.setLayoutTheme("light")}}}),a("f7-col",{staticClass:"bg-color-black",staticStyle:{cursor:"pointer",padding:"30px",border:"1px solid rgba(255,255,255,0.1)"},attrs:{width:"50"},nativeOn:{click:function(e){t.setLayoutTheme("dark")}}})],1)],1),a("f7-block-title",[t._v("Color Theme")]),a("f7-block",[a("f7-row",[t._l(t.colors,function(e){return a("f7-col",{key:e,attrs:{width:"33"}},[a("f7-button",{staticStyle:{"margin-bottom":"1em","text-transform":"capitalize"},attrs:{fill:"",round:"",raised:"",color:e},on:{click:function(a){t.setColorTheme(e)}}},[t._v("\n          "+t._s(e)+"\n        ")])],1)}),a("f7-col",{attrs:{width:"33"}})],2)],1)],1)},zt=[],Vt={components:{f7Navbar:i["D"],f7Page:i["E"],f7BlockTitle:i["e"],f7Button:i["f"],f7Row:i["K"],f7Col:i["k"],f7Block:i["c"]},data:function(){var t=["red","green","blue","pink","yellow","orange","gray","black"];return{colors:t,colorsAmount:t.length}},methods:{setLayoutTheme:function(t){var e=this,a=e.$f7;a.root.removeClass("theme-dark theme-light").addClass("theme-".concat(t)),this.$lf.setItem("layout",t)},setColorTheme:function(t){var e=this,a=e.$f7,n=a.root[0].className.match(/color-theme-([a-z]*)/);n&&a.root.removeClass(n[0]),a.root.addClass("color-theme-".concat(t)),this.$lf.setItem("color",t)}}},Gt=Vt,Qt=(a("Iq1P"),Object(m["a"])(Gt,Ft,zt,!1,null,null,null)),Yt=Qt.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{attrs:{"infinite-preloader":t.showPreloader,infinite:!0},on:{"page:init":t.onPageInit,infinite:t.onInfinite}},[a("f7-navbar",{attrs:{"back-link":"返回",title:"最近主题",subtitle:t.topicCount}},[a("f7-nav-right",[a("f7-link",{attrs:{"popover-open":".recent-menu","icon-ios":"f7:bars","icon-md":"material:menu"}})],1)],1),a("f7-list",{staticClass:"topic-list",attrs:{"media-list":""}},t._l(t.listData,function(e){return a("f7-list-item",{key:e.id,class:e.top?"top":"",attrs:{link:"/t/"+e.id}},[a("img",{attrs:{slot:"media",src:e.avatar},slot:"media"}),a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(e.title)+"\n      ")]),a("div",{attrs:{slot:"text"},slot:"text"},[t._v("\n        "+t._s(e.node)+"\n        "),e.time?[t._v("\n          • "+t._s(e.time)+"\n        ")]:t._e()],2),a("span",{attrs:{slot:"after"},slot:"after"},[a("f7-chip",{staticClass:"chip-container",attrs:{text:e.reply+""}})],1)])})),a("f7-popover",{ref:"nodeMenu",staticClass:"recent-menu"},[a("f7-list",[a("f7-list-item",{attrs:{link:!1,title:"乱序模式"}},[a("f7-toggle",{attrs:{color:"blue"},on:{"toggle:change":t.onToggleChange}})],1)],1)],1)],1)},Wt=[],Xt={components:{f7Page:i["E"],f7Navbar:i["D"],f7List:i["s"],f7ListItem:i["u"],f7Link:i["r"],f7Icon:i["o"],f7Chip:i["j"],f7Block:i["c"],f7NavRight:i["B"],f7Popover:i["H"],f7Toggle:i["O"]},data:function(){return{listData:[],p:1,total:1,topicCount:"",allowInfinite:!0,showPreloader:!0,isRandom:!1}},methods:{onPageInit:function(){this.getData()},onInfinite:function(){var t=this;this.allowInfinite&&(this.allowInfinite=!1,this.getData().then(function(){t.showPreloader=t.allowInfinite=!(t.p>t.total)}))},onToggleChange:function(t){var e=this;this.isRandom=t,this.listData=[],this.p=t?this.getRandomPage():1,this.allowInfinite&&(this.allowInfinite=!1,this.getData().then(function(){e.allowInfinite=!0}))},getRandomPage:function(){return Math.floor(1+Math.random()*this.total)},getData:function(){var t=this;return this.$http.get("".concat(f["a"].recent,"?p=").concat(this.p)).then(function(e){e.success&&(t.p>=e.data.total&&(t.showPreloader=!1,t.allowInfinite=!1),t.listData=t.listData.concat(e.data.list),t.p=t.isRandom?t.getRandomPage():t.p+1,t.total=e.data.total,t.topicCount="".concat(e.data.count," 主题"))}).catch(function(t){console.log(t)})}}},Zt=Xt,te=(a("hlTg"),Object(m["a"])(Zt,Ut,Wt,!1,null,null,null)),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{on:{"page:init":t.onPageInit}},[a("f7-navbar",{attrs:{"back-link":"返回",title:t.title,subtitle:t.topicCount}}),t.isInit?t._e():a("f7-block",{staticClass:"text-align-center"},[a("f7-preloader")],1),a("f7-list",{staticClass:"topic-list",attrs:{"media-list":""}},t._l(t.listData,function(e){return a("f7-list-item",{key:e.id,class:e.top?"top":"",attrs:{link:"/t/"+e.id}},[a("img",{attrs:{slot:"media",src:e.avatar},slot:"media"}),a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(e.title)+"\n      ")]),a("div",{attrs:{slot:"text"},slot:"text"},[t._v("\n        "+t._s(e.node)+"\n        "),e.time?[t._v("\n          • "+t._s(e.time)+"\n        ")]:t._e()],2),a("span",{attrs:{slot:"after"},slot:"after"},[a("f7-chip",{staticClass:"chip-container",attrs:{text:e.reply+""}})],1)])}))],1)},ne=[],oe={components:{f7Page:i["E"],f7Navbar:i["D"],f7List:i["s"],f7ListItem:i["u"],f7Link:i["r"],f7Icon:i["o"],f7Chip:i["j"],f7Block:i["c"],f7Preloader:i["J"]},created:function(){this.title=this.$f7route.query.title,this.name=this.$f7route.params.name},data:function(){return{listData:[],topicCount:"",title:"加载中",name:"",isInit:!1}},methods:{onPageInit:function(){var t=this;this.getData().then(function(){t.isInit=!0})},getData:function(){var t=this;return this.$http.get("".concat(f["a"].tag,"/").concat(this.name)).then(function(e){e.success&&(t.listData=t.listData.concat(e.data.list),t.topicCount="".concat(e.data.count," 主题"))}).catch(function(t){console.log(t)})}}},ie=oe,se=(a("aleK"),Object(m["a"])(ie,ae,ne,!1,null,null,null)),re=se.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",[a("f7-navbar",{attrs:{title:"Not found",backLink:"返回"}}),a("f7-block",{attrs:{strong:""}},[a("p",[t._v("Sorry")]),a("p",[t._v("Requested content not found.")])])],1)},ce=[],fe={components:{f7Page:i["E"],f7Navbar:i["D"],f7Block:i["c"]}},ue=fe,he=Object(m["a"])(ue,le,ce,!1,null,null,null),me=he.exports,pe=[{path:"/",component:d},{path:"/nodes/",component:H},{path:"/all-nodes/",async:function(t,e,n,o){var i=function(){return a.e(1).then(a.bind(null,"zYgF"))};i().then(function(t){n({component:t.default})})}},{path:"/discovery/",component:y},{path:"/me/",component:P},{path:"/search/",component:Ot},{path:"/setting/",component:Jt},{path:"/color/",component:Yt},{path:"/recent/",component:ee},{path:"/t/:id",component:O},{path:"/chatDetail/:id",component:xt},{path:"/dialog/:chatData",component:Lt},{path:"/go/:name",component:G},{path:"/tab/:name",component:Z},{path:"/tag/:name",component:re},{path:"/member/:name",component:it},{path:"/member/:name/topics",component:ut},{path:"/member/:name/replies",component:vt},{path:"(.*)",component:me}],de={components:{f7App:i["b"],f7Panel:i["F"],f7View:i["Q"],f7Statusbar:i["M"]},created:function(){var t=this;this.root="/v2ex/m/",this.$lf.getItem(this.userInfoKey).then(function(e){e&&e.isLogin&&t.$http.get("".concat(f["a"].checkLogin)).then(function(e){e.success&&!e.data.isLogin&&t.$lf.setItem(t.userInfoKey,{isLogin:!1,name:null}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)})},mounted:function(){var t=this;this.$lf.getItem("layout").then(function(e){e&&t.$f7.root.removeClass("theme-dark theme-light").addClass("theme-".concat(e))}).catch(function(t){console.log(t)}),this.$lf.getItem("color").then(function(e){if(e){var a=t.$f7.root[0].className.match(/color-theme-([a-z]*)/);a&&t.$f7.root.removeClass(a[0]),t.$f7.root.addClass("color-theme-".concat(e))}}).catch(function(t){console.log(t)})},data:function(){var t=localStorage.getItem("theme"),e=t||"auto";return{f7Params:{theme:e,routes:pe,id:"m.v2ex"},root:"/",userInfoKey:"userInfo"}}},ge=de,ve=(a("XAuw"),Object(m["a"])(ge,s,r,!1,null,null,null)),be=ve.exports,ke=a("oAJy"),_e=a.n(ke),ye=a("lIOY");Object(ye["a"])("".concat("/v2ex/m/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),o["a"].use(i["a"]),_e.a.config({name:"m.v2ex"}),n["a"].config.productionTip=!1,n["a"].prototype.$http={get:function(t){"string"===typeof t&&(t={url:t});var e=localStorage.getItem("host");"auto"===e&&(e=location.origin);var a=e||location.origin;return t.url=t.url.replace(/^##host##/,a),new Promise(function(e,a){o["a"].request(Object.assign({},{method:"GET",dataType:"json",cache:!1,success:function(t){e(t)},error:function(t,e){console.log(e),a(t,e)}},t))})},post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=localStorage.getItem("host");"auto"===e&&(e=location.origin);var a=e||location.origin;return t.url=t.url.replace(/^##host##/,a),new Promise(function(e,a){o["a"].request(Object.assign({},{method:"POST",dataType:"json",cache:!1,success:function(t){e(t)},error:function(t,e){console.log(e),a(t,e)}},t))})}},n["a"].prototype.$lf=_e.a,new n["a"]({render:function(t){return t(be)}}).$mount("#app")},XAuw:function(t,e,a){"use strict";var n=a("EG/1"),o=a.n(n);o.a},YMuy:function(t,e,a){"use strict";var n=a("OYgv"),o=a.n(n);o.a},aleK:function(t,e,a){"use strict";var n=a("pfJy"),o=a.n(n);o.a},bA33:function(t,e,a){"use strict";var n=a("Hm/9"),o=a.n(n);o.a},e6ga:function(t,e,a){},eVAu:function(t,e,a){t.exports=a.p+"img/member_0.4e7f038e.png"},"hP+Q":function(t,e,a){"use strict";var n=a("u4BB"),o=a.n(n);o.a},hlTg:function(t,e,a){"use strict";var n=a("M2dp"),o=a.n(n);o.a},i8Ah:function(t,e,a){},j6lj:function(t,e,a){},jla9:function(t,e,a){},n3If:function(t,e,a){},oLHx:function(t,e,a){},pfJy:function(t,e,a){},rWKQ:function(t,e,a){},u4BB:function(t,e,a){},udCz:function(t,e,a){"use strict";var n=a("RYpV"),o=a.n(n);o.a},xbS4:function(t,e,a){}});
//# sourceMappingURL=app-legacy.c8483053.js.map