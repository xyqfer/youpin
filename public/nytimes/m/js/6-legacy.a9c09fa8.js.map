{"version":3,"sources":["webpack:///./src/pages/Content3.vue?6f84","webpack:///./src/pages/Content3.vue?0ef7","webpack:///src/pages/Content3.vue","webpack:///./src/pages/Content3.vue?066f","webpack:///./src/pages/Content3.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Content3_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","page:init","onPageInit","attrs","title","subtitle","percent","back-link","isLoading","_e","icon-md","_l","news","index","key","type","first","last","tail","slot","_v","_s","meta","originIndex","text","split","word","click","onWordClick","total","href","~click","$event","nextBubble","staticRenderFns","Content3vue_type_script_lang_js_","components","f7Navbar","framework7_vue_esm","f7Page","f7Messages","f7MessagesTitle","f7Message","f7Preloader","f7Block","f7NavRight","f7List","f7ListItem","f7Link","data","link","newsContent","bubbleData","current","lfKey","progressIndex","region","paragraph","preference","translatedText","methods","_this","_this$$f7route$query","$f7route","query","name","concat","$lf","getItem","then","initData","getData","catch","err","console","log","_this2","$http","get","api","res","success","_this3","translate","content","en","resp","reduce","acc","item","push","zh","$nextTick","length","finally","nextIndex","e","slice","target","classList","add","toggle","post","url","translate2","watch","val","pages_Content3vue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/6-legacy.a9c09fa8.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Content3.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Content3.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('f7-page',{staticClass:\"messages-page\",on:{\"page:init\":_vm.onPageInit}},[_c('f7-navbar',{attrs:{\"title\":\"Theater\",\"subtitle\":_vm.percent,\"back-link\":\"返回\"}},[(!_vm.isLoading)?_c('f7-nav-right',[_c('f7-link',{attrs:{\"icon-md\":\"material:swap_vert\"}})],1):_vm._e()],1),(_vm.isLoading)?_c('f7-block',{staticClass:\"text-align-center\"},[_c('f7-preloader')],1):_vm._e(),_c('f7-messages',{staticClass:\"news-content-list\"},_vm._l((_vm.bubbleData),function(news,index){return _c('f7-message',{key:index,attrs:{\"type\":news.type,\"first\":true,\"last\":true,\"tail\":true}},[(news.type === 'received')?_c('div',{attrs:{\"slot\":\"name\"},slot:\"name\"},[_vm._v(\"\\n        \"+_vm._s(news.meta.originIndex + 1)+\"楼\\n      \")]):_vm._e(),_c('div',{attrs:{\"slot\":\"text\"},slot:\"text\"},[(news.type === 'received')?_vm._l((news.text.split(' ')),function(word,index){return _c('span',{key:index,on:{\"click\":_vm.onWordClick}},[_vm._v(\"\\n            \"+_vm._s(word)+\"\\n          \")])}):[_vm._v(\"\\n          \"+_vm._s(news.text)+\"\\n        \")]],2),(index < (_vm.total * 2 - 1))?_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('a',{staticClass:\"message-link\",attrs:{\"href\":\"#\"},on:{\"~click\":function($event){_vm.nextBubble(index + 1, news.type === 'sent' ? news.meta.originIndex + 1 : null, $event)}}},[_vm._v(\"\\n          Next\\n        \")])]):_vm._e()])}))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <f7-page\n    @page:init=\"onPageInit\"\n    class=\"messages-page\"\n  >\n    <f7-navbar\n      title=\"Theater\"\n      :subtitle=\"percent\"\n      back-link=\"返回\"\n    >\n      <f7-nav-right v-if=\"!isLoading\">\n        <f7-link\n          icon-md=\"material:swap_vert\">\n        </f7-link>\n      </f7-nav-right>\n    </f7-navbar>\n\n    <f7-block\n      class=\"text-align-center\"\n      v-if=\"isLoading\"\n    >\n      <f7-preloader></f7-preloader>\n    </f7-block>\n\n    <f7-messages\n      class=\"news-content-list\"\n    >\n      <f7-message\n        v-for=\"(news, index) in bubbleData\"\n        :key=\"index\"\n        :type=\"news.type\"\n        :first=\"true\"\n        :last=\"true\"\n        :tail=\"true\"\n      >\n        <div \n          slot=\"name\"\n          v-if=\"news.type === 'received'\"\n        >\n          {{news.meta.originIndex + 1}}楼\n        </div>\n        <div\n          slot=\"text\"\n        >\n          <template v-if=\"news.type === 'received'\">\n            <span\n              v-for=\"(word, index) in news.text.split(' ')\"\n              :key=\"index\"\n              @click=\"onWordClick\"\n            >\n              {{word}}\n            </span>\n          </template>\n          <template v-else>\n            {{news.text}}\n          </template>\n        </div>\n        <div\n          slot=\"footer\"\n          v-if=\"index < (total * 2 - 1)\"\n        >\n          <a\n            href=\"#\"\n            @click.once=\"nextBubble(index + 1, news.type === 'sent' ? news.meta.originIndex + 1 : null, $event)\"\n            class=\"message-link\"\n          >\n            Next\n          </a>\n        </div>\n      </f7-message>\n    </f7-messages>\n\n  </f7-page>\n</template>\n\n<script>\nimport {\n  f7Navbar,\n  f7Page,\n  f7Messages,\n  f7MessagesTitle,\n  f7Message,\n  f7Preloader,\n  f7Block,\n  f7NavRight,\n  f7List,\n  f7ListItem,\n  f7Link,\n} from \"framework7-vue\";\nimport api from \"@/api\";\nimport preference from \"@/preference\";\n\nexport default {\n  components: {\n    f7Navbar,\n    f7Page,\n    f7Messages,\n    f7MessagesTitle,\n    f7Message,\n    f7Preloader,\n    f7Block,\n    f7NavRight,\n    f7List,\n    f7ListItem,\n    f7Link,\n  },\n\n  data() {\n    return {\n      link: '',\n      isLoading: true,\n      newsContent: [],\n      bubbleData: [],\n      percent: \"\",\n      current: 0,\n      total: 0,\n      lfKey: \"\",\n      index: -1,\n      progressIndex: 0,\n      region: '',\n      paragraph: '',\n      preference: {},\n      translatedText: null,\n    };\n  },\n\n  methods: {\n    onPageInit() {\n      let { name, region, index } = this.$f7route.query;\n      let lfKey = `/content/${name}/${region}`;\n\n      this.$lf\n        .getItem(lfKey)\n        .then(data => {\n          if (data) {\n            this.initData(data);\n          } else {\n            this.getData();\n          }\n        })\n        .catch(err => {\n          console.log(err);\n        });\n\n      this.link = name;\n      this.index = index;\n      this.lfKey = lfKey;\n      this.region = region;\n      this.preference = preference[region];\n    },\n\n    getData() {\n      let { name } = this.$f7route.query;\n\n      this.$http\n        .get(`${api[this.preference.api]}?name=${name}`)\n        .then(res => {\n          if (res.success) {\n            this.initData(res.data);\n          }\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    },\n\n    initData(data) {\n      this.translate(data.content[this.index].en)\n        .then(resp => {\n          this.newsContent = resp.content.reduce((acc, item, index) => {\n            acc.push({\n              type: \"received\",\n              text: item.en,\n              meta: {\n                originIndex: index\n              }\n            });\n\n            acc.push({\n              type: \"sent\",\n              text: item.zh,\n              meta: {\n                originIndex: index\n              }\n            });\n\n            return acc;\n          }, []);\n\n          this.$nextTick(() => {\n            this.total = this.newsContent.length / 2;\n            this.nextBubble(0, 0);\n          });\n        })\n        .catch(err => {\n          console.log(err);\n        })\n        .finally(() => {\n          this.isLoading = false;\n        });\n    },\n\n    nextBubble(nextIndex, originIndex, e) {\n      this.bubbleData = this.newsContent.slice(0, nextIndex + 1);\n\n      if (originIndex != null) {\n        this.current = originIndex + 1;\n      }\n\n      this.progressIndex = nextIndex;\n      \n      if (e) {\n        e.target.classList.add(\"color-gray\");\n      }\n    },\n\n    onWordClick(e) {\n      e.target.classList.toggle(\"bg-color-yellow\");\n    },\n\n    translate(text) {\n      return this.$http\n        .post({\n          url: api.translate2,\n          data: {\n            text\n          }\n        })\n        .then(res => {\n          if (res.success) {\n            return res.data;\n          } else {\n            return {};\n          }\n        })\n        .catch(err => {\n          console.log(err);\n          return \"\";\n        });\n    }\n  },\n\n  watch: {\n    current(val) {\n      this.percent = `${val} / ${this.total}`;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Content3.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Content3.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Content3.vue?vue&type=template&id=1585d86d&\"\nimport script from \"./Content3.vue?vue&type=script&lang=js&\"\nexport * from \"./Content3.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Content3.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}