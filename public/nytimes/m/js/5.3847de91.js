(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{dhZZ:function(t,e,n){"use strict";var s=n("zYLy"),a=n.n(s);a.a},wX4y:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("f7-page",{staticClass:"messages-page",on:{"page:init":t.onPageInit}},[n("f7-navbar",{attrs:{"back-link":"返回"}},[n("f7-nav-title",[t._v("\n      Theater "),t.isLoading?n("f7-preloader",{attrs:{color:"white",size:20}}):t._e()],1),n("f7-nav-right",{staticStyle:{"font-size":"14px","margin-right":"16px"}},[t._v("\n      "+t._s(t.percent)+"\n    ")])],1),n("f7-messages",{staticClass:"news-content-list"},t._l(t.bubbleData,function(e,s){return n("f7-message",{key:s,attrs:{type:e.type,first:!0,last:!0,tail:!0}},["received"===e.type?n("div",{attrs:{slot:"name"},slot:"name"},[t._v("\n        "+t._s(e.meta.originIndex+1)+"楼\n      ")]):t._e(),n("div",{attrs:{slot:"text"},slot:"text"},["received"===e.type?t._l(e.text.split(" "),function(e,s){return n("span",{key:s,on:{click:t.onWordClick}},[t._v("\n            "+t._s(e)+"\n          ")])}):[t._v("\n          "+t._s(e.text)+"\n        ")]],2),s<2*t.total-1?n("div",{staticClass:"display-flex justify-content-space-between align-items-flex-end",attrs:{slot:"footer"},slot:"footer"},["received"===e.type?n("div"):t._e(),n("a",{staticClass:"message-link",attrs:{href:"#"},on:{"~click":function(n){t.nextBubble(s+1,"sent"===e.type?e.meta.originIndex+1:null,n)}}},[t._v("\n          Next\n        ")]),"sent"===e.type?n("div"):t._e()]):t._e()])}))],1)},a=[],i=n("7eDf"),r=n("1yJj"),l=n("aW/7"),o={components:{f7Navbar:i["s"],f7Page:i["t"],f7Messages:i["n"],f7MessagesTitle:i["o"],f7Message:i["m"],f7Preloader:i["x"],f7Block:i["c"],f7List:i["k"],f7ListItem:i["l"],f7Link:i["j"],f7NavTitle:i["r"],f7NavRight:i["q"]},data(){return{link:"",isLoading:!0,newsContent:[],bubbleData:[],percent:"",current:0,total:0,lfKey:"",index:-1,progressIndex:0,region:"",paragraph:"",preference:{},translatedText:null}},methods:{onPageInit(){let t=this.$f7route.query,e=t.name,n=t.region,s=t.index,a=`/content/${e}/${n}`;this.$lf.getItem(a).then(t=>{t?this.initData(t):this.getData()}).catch(t=>{console.log(t)}),this.link=e,this.index=s,this.lfKey=a,this.region=n,this.preference=l["a"][n]},getData(){let t=this.$f7route.query.name;this.$http.get(`${r["a"][this.preference.api]}?name=${t}`).then(t=>{t.success&&this.initData(t.data)}).catch(t=>{console.log(t)})},initData(t){this.translate(t.content[this.index].en).then(t=>{this.newsContent=t.content.reduce((t,e,n)=>{return t.push({type:"received",text:e.en,meta:{originIndex:n}}),t.push({type:"sent",text:e.zh,meta:{originIndex:n}}),t},[]),this.$nextTick(()=>{this.total=this.newsContent.length/2,this.nextBubble(0,0)})}).catch(t=>{console.log(t)}).finally(()=>{this.isLoading=!1})},nextBubble(t,e,n){this.bubbleData=this.newsContent.slice(0,t+1),null!=e&&(this.current=e+1),this.progressIndex=t,n&&n.target.classList.add("color-gray")},onWordClick(t){t.target.classList.toggle("bg-color-yellow")},translate(t){return this.$http.post({url:r["a"].translate2,data:{text:t}}).then(t=>{return t.success?t.data:{}}).catch(t=>{return console.log(t),""})}},watch:{current(t){this.percent=`${t} / ${this.total}`}}},c=o,h=(n("dhZZ"),n("KHd+")),f=Object(h["a"])(c,s,a,!1,null,null,null);e["default"]=f.exports},zYLy:function(t,e,n){}}]);
//# sourceMappingURL=5.3847de91.js.map