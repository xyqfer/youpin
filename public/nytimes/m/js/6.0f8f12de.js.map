{"version":3,"sources":["webpack:///./src/pages/Content3.vue?6f84","webpack:///./src/pages/Content3.vue?594c","webpack:///src/pages/Content3.vue","webpack:///./src/pages/Content3.vue?066f","webpack:///./src/pages/Content3.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Content3_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","page:init","onPageInit","attrs","back-link","_v","color","size","_e","staticStyle","font-size","margin-right","_s","percent","_l","news","index","key","type","first","last","tail","slot","meta","originIndex","text","split","word","click","onWordClick","total","href","~click","$event","nextBubble","staticRenderFns","Content3vue_type_script_lang_js_","components","f7Navbar","framework7_vue_esm","f7Page","f7Messages","f7MessagesTitle","f7Message","f7Preloader","f7Block","f7List","f7ListItem","f7Link","f7NavTitle","f7NavRight","[object Object]","link","isLoading","newsContent","bubbleData","current","lfKey","progressIndex","region","paragraph","preference","translatedText","methods","_this$$f7route$query","$f7route","query","name","$lf","getItem","then","data","initData","getData","catch","err","console","log","$http","get","api","res","success","translate","content","en","resp","reduce","acc","item","push","zh","$nextTick","length","finally","nextIndex","e","slice","target","classList","add","toggle","post","url","translate2","watch","val","pages_Content3vue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/6.0f8f12de.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Content3.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Content3.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('f7-page',{staticClass:\"messages-page\",on:{\"page:init\":_vm.onPageInit}},[_c('f7-navbar',{attrs:{\"back-link\":\"返回\"}},[_c('f7-nav-title',[_vm._v(\"\\n      Theater \"),(_vm.isLoading)?_c('f7-preloader',{attrs:{\"color\":\"white\",\"size\":20}}):_vm._e()],1),_c('f7-nav-right',{staticStyle:{\"font-size\":\"14px\",\"margin-right\":\"16px\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.percent)+\"\\n    \")])],1),_c('f7-messages',{staticClass:\"news-content-list\"},_vm._l((_vm.bubbleData),function(news,index){return _c('f7-message',{key:index,attrs:{\"type\":news.type,\"first\":true,\"last\":true,\"tail\":true}},[(news.type === 'received')?_c('div',{attrs:{\"slot\":\"name\"},slot:\"name\"},[_vm._v(\"\\n        \"+_vm._s(news.meta.originIndex + 1)+\"楼\\n      \")]):_vm._e(),_c('div',{attrs:{\"slot\":\"text\"},slot:\"text\"},[(news.type === 'received')?_vm._l((news.text.split(' ')),function(word,index){return _c('span',{key:index,on:{\"click\":_vm.onWordClick}},[_vm._v(\"\\n            \"+_vm._s(word)+\"\\n          \")])}):[_vm._v(\"\\n          \"+_vm._s(news.text)+\"\\n        \")]],2),(index < (_vm.total * 2 - 1))?_c('div',{staticClass:\"display-flex justify-content-space-between align-items-flex-end\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[(news.type === 'received')?_c('div'):_vm._e(),_c('a',{staticClass:\"message-link\",attrs:{\"href\":\"#\"},on:{\"~click\":function($event){_vm.nextBubble(index + 1, news.type === 'sent' ? news.meta.originIndex + 1 : null, $event)}}},[_vm._v(\"\\n          Next\\n        \")]),(news.type === 'sent')?_c('div'):_vm._e()]):_vm._e()])}))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <f7-page\n    @page:init=\"onPageInit\"\n    class=\"messages-page\"\n  >\n    <f7-navbar\n      back-link=\"返回\"\n    >\n      <f7-nav-title>\n        Theater <f7-preloader v-if=\"isLoading\" color=\"white\" :size=\"20\"></f7-preloader>\n      </f7-nav-title>\n      <f7-nav-right style=\"font-size: 14px;margin-right: 16px;\">\n        {{percent}}\n      </f7-nav-right>\n    </f7-navbar>\n\n    <f7-messages\n      class=\"news-content-list\"\n    >\n      <f7-message\n        v-for=\"(news, index) in bubbleData\"\n        :key=\"index\"\n        :type=\"news.type\"\n        :first=\"true\"\n        :last=\"true\"\n        :tail=\"true\"\n      >\n        <div \n          slot=\"name\"\n          v-if=\"news.type === 'received'\"\n        >\n          {{news.meta.originIndex + 1}}楼\n        </div>\n        <div\n          slot=\"text\"\n        >\n          <template v-if=\"news.type === 'received'\">\n            <span\n              v-for=\"(word, index) in news.text.split(' ')\"\n              :key=\"index\"\n              @click=\"onWordClick\"\n            >\n              {{word}}\n            </span>\n          </template>\n          <template v-else>\n            {{news.text}}\n          </template>\n        </div>\n        <div\n          slot=\"footer\"\n          v-if=\"index < (total * 2 - 1)\"\n          class=\"display-flex justify-content-space-between align-items-flex-end\"\n        >\n          <div v-if=\"news.type === 'received'\"></div>\n          <a\n            href=\"#\"\n            @click.once=\"nextBubble(index + 1, news.type === 'sent' ? news.meta.originIndex + 1 : null, $event)\"\n            class=\"message-link\"\n          >\n            Next\n          </a>\n          <div v-if=\"news.type === 'sent'\"></div>\n        </div>\n      </f7-message>\n    </f7-messages>\n\n  </f7-page>\n</template>\n\n<script>\nimport {\n  f7Navbar,\n  f7Page,\n  f7Messages,\n  f7MessagesTitle,\n  f7Message,\n  f7Preloader,\n  f7Block,\n  f7List,\n  f7ListItem,\n  f7Link,\n  f7NavTitle,\n  f7NavRight,\n} from \"framework7-vue\";\nimport api from \"@/api\";\nimport preference from \"@/preference\";\n\nexport default {\n  components: {\n    f7Navbar,\n    f7Page,\n    f7Messages,\n    f7MessagesTitle,\n    f7Message,\n    f7Preloader,\n    f7Block,\n    f7List,\n    f7ListItem,\n    f7Link,\n    f7NavTitle,\n    f7NavRight,\n  },\n\n  data() {\n    return {\n      link: '',\n      isLoading: true,\n      newsContent: [],\n      bubbleData: [],\n      percent: \"\",\n      current: 0,\n      total: 0,\n      lfKey: \"\",\n      index: -1,\n      progressIndex: 0,\n      region: '',\n      paragraph: '',\n      preference: {},\n      translatedText: null,\n    };\n  },\n\n  methods: {\n    onPageInit() {\n      let { name, region, index } = this.$f7route.query;\n      let lfKey = `/content/${name}/${region}`;\n\n      this.$lf\n        .getItem(lfKey)\n        .then(data => {\n          if (data) {\n            this.initData(data);\n          } else {\n            this.getData();\n          }\n        })\n        .catch(err => {\n          console.log(err);\n        });\n\n      this.link = name;\n      this.index = index;\n      this.lfKey = lfKey;\n      this.region = region;\n      this.preference = preference[region];\n    },\n\n    getData() {\n      let { name } = this.$f7route.query;\n\n      this.$http\n        .get(`${api[this.preference.api]}?name=${name}`)\n        .then(res => {\n          if (res.success) {\n            this.initData(res.data);\n          }\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    },\n\n    initData(data) {\n      this.translate(data.content[this.index].en)\n        .then(resp => {\n          this.newsContent = resp.content.reduce((acc, item, index) => {\n            acc.push({\n              type: \"received\",\n              text: item.en,\n              meta: {\n                originIndex: index\n              }\n            });\n\n            acc.push({\n              type: \"sent\",\n              text: item.zh,\n              meta: {\n                originIndex: index\n              }\n            });\n\n            return acc;\n          }, []);\n\n          this.$nextTick(() => {\n            this.total = this.newsContent.length / 2;\n            this.nextBubble(0, 0);\n          });\n        })\n        .catch(err => {\n          console.log(err);\n        })\n        .finally(() => {\n          this.isLoading = false;\n        });\n    },\n\n    nextBubble(nextIndex, originIndex, e) {\n      this.bubbleData = this.newsContent.slice(0, nextIndex + 1);\n\n      if (originIndex != null) {\n        this.current = originIndex + 1;\n      }\n\n      this.progressIndex = nextIndex;\n      \n      if (e) {\n        e.target.classList.add(\"color-gray\");\n      }\n    },\n\n    onWordClick(e) {\n      e.target.classList.toggle(\"bg-color-yellow\");\n    },\n\n    translate(text) {\n      return this.$http\n        .post({\n          url: api.translate2,\n          data: {\n            text\n          }\n        })\n        .then(res => {\n          if (res.success) {\n            return res.data;\n          } else {\n            return {};\n          }\n        })\n        .catch(err => {\n          console.log(err);\n          return \"\";\n        });\n    }\n  },\n\n  watch: {\n    current(val) {\n      this.percent = `${val} / ${this.total}`;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Content3.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Content3.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Content3.vue?vue&type=template&id=7b26f33d&\"\nimport script from \"./Content3.vue?vue&type=script&lang=js&\"\nexport * from \"./Content3.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Content3.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}